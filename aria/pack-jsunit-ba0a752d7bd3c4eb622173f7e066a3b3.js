/*
 * Aria Templates 1.3.5 - 05 Feb 2013
 *
 * Copyright 2009-2013 Amadeus s.a.s.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
//***MULTI-PART
//*******************
//LOGICAL-PATH:aria/jsunit/AppletWorker.js
//*******************
(function(){var e,t,n;Aria.$global.AppletCallback=function(){e!=null&&(e.call(t,n),e=null,t=null,n=null)},Aria.classDefinition({$classpath:"aria.jsunit.AppletWorker",$singleton:!0,$constructor:function(){this._applet=null,this._appletName=null,this._isReady=!1},$destructor:function(){},$prototype:{init:function(e){if(this._applet!=null)return;this._appletName=0,this._applet=this._addApplet(e),this._isReady=!0;if(!this._applet)throw new Error(this._appletName+" applet was not found in the document")},_addApplet
:function(e){var t=Aria.$frameworkWindow.document.getElementById(e),n="<APPLET name='myTestApplet' code='ScreenCaptureApplet.class' archive='ScreenCapture.jar' width='1000' height='100' MAYSCRIPT></APPLET>";return t.innerHTML=n,this._getApplet()},_getApplet:function(){return Aria.$frameworkWindow.document.applets[this._appletName]||null},sendInstruction:function(r){e=r.cb,t=r.scope,n=r.args,this._applet.setInstruction(r.instruction,"AppletCallback")},getResponse:function(){var e=this._applet.getResponse(),t=1
,n="No response yet - Retry later";if(e.indexOf(";")!=-1){var r=e.split(";");t=r[0],r.length>1&&(n=r[1])}return{code:t,reason:n}},isReady:function(){return this._isReady}}})})();
//*******************
//LOGICAL-PATH:aria/jsunit/Assert.js
//*******************
(function(){var e=Aria.$global.console,t=function(e,n){if(e===n)return null;if(typeof n!=typeof e)return[];if(typeof n=="object"||typeof n=="array")for(var r in n){var i=t(e[r],n[r]);if(i!=null)return i.unshift(r),i}else if(e!=n)return[];return null};Aria.classDefinition({$classpath:"aria.jsunit.Assert",$extends:"aria.jsunit.Test",$statics:{ERROR_TYPES:{ERROR:"error",FAILURE:"failure"}},$dependencies:["aria.core.log.SilentArrayAppender","aria.core.Log"],$constructor:function(){this.$Test.constructor.call(this
),this._currentTestName="",this._assertCount=0,this._totalAssertCount=0,this._overriddenClasses=null,this._expectedEventsList=null,this._eventIndexInList=0,this.evtLogs=[],aria.core.Log.clearAppenders(),aria.core.Log.addAppender(new aria.core.log.SilentArrayAppender),aria.core.Log.resetLoggingLevels(),aria.core.Log.setLoggingLevel("*",1)},$destructor:function(){this._expectedEventsList=null,this.$Test.$destructor.call(this)},$prototype:{ASSERT_FAILURE:"Assert Failure",_startTest:function(e){this.$Test._startTest
.call(this),this._totalAssertCount=0,this.$raiseEvent({name:"start",testObject:this,testClass:this.$classpath})},_endTest:function(){this.$Test._endTest.call(this),this.checkExpectedEventListEnd(),this.resetClassOverrides(),this.assertLogsEmpty(!1,!1),this._assertCount=0,this._currentTestName="",this._isFinished=!0,this.$raiseEvent({name:"end",testObject:this,testClass:this.$classpath,nbrOfAsserts:this._totalAssertCount})},_updateAssertInfo:function(e){this._assertCount=0,this._currentTestName=e,this.$raiseEvent
({name:"stateChange",testClass:this.$classpath,testState:this._currentTestName})},assertTrue:function(t,n){this._assertCount++,this._totalAssertCount++;if(t!==!0){var r="Assert #"+this._assertCount+" failed";throw n&&(r+=" : "+n),this.raiseFailure(r),e&&aria.utils.Type.isFunction(e.trace)&&e.assert(!1,"Stack trace for failed Assert #"+this._assertCount+" in test : ["+this._currentTestName+"]"),{name:this.ASSERT_FAILURE,message:r}}},assertFalse:function(e,t){this.assertTrue(e===!1,t||"Expected false. Got: "+e
)},assertEquals:function(e,t,n){var r;n?r=aria.utils.String.substitute(n,['"'+e+'"','"'+t+'"']):r='First value: "'+e+'" differs from the second: "'+t+'".',this.assertTrue(e===t,r)},assertNotEquals:function(e,t,n,r){var i=n||"First and second value shouldn't be equal but they are both equal to: "+e;this.assertTrue(e!==t,i)},assertLogsEmpty:function(t,n){n!==!1&&(this._assertCount++,this._totalAssertCount++);var r=aria.core.Log.getAppenders()[0];if(!r.isEmpty()){var i=r.getLogs(),s=!1,o="";for(var u=0;u<i.length
;u++){var a=i[u];a.level=="error"&&(s=!0,o="Uncaught error detected: ["+a.className+"] "+a.msg,a.objOrErr&&e&&aria.utils.Type.isFunction(e.error)&&e.error(this.$classpath+"."+this._currentTestName+": "+o,a.objOrErr),this.raiseFailure(o))}r.empty();if(s&&t!==!1)throw{name:this.ASSERT_FAILURE,message:o}}},assertErrorInLogs:function(e,t){var n=aria.core.Log.getAppenders()[0],r=n.getLogs(),i=!1,s=[];e==null&&this.assertTrue(!1,"assertErrorInLogs was called with a null error message.");if(t&&t>0){var o=0;for(var u=0
;r.length>u;u++)o<t&&r[u].msgId==e?o++:s.push(r[u]);n.setLogs(s),this.assertTrue(o==t,"Expected error "+e+" found "+o+" times in logs")}else{for(var u=0;r.length>u;u++)r[u].msgId==e?i=!0:s.push(r[u]);n.setLogs(s),this.assertTrue(i,"Expected error not found in logs: "+e)}},assertJsonContains:function(e,t,n){this.assertTrue(aria.utils.Json.contains(e,t),n)},assertJsonEquals:function(e,t,n){if(!n){var r=aria.utils.Json.convertToJsonString(e),i=aria.utils.Json.convertToJsonString(t);n="JSON comparison failed. First object: <code>"+
r+"</code> differs from the second: <code>"+i+"</code>."}this.assertTrue(aria.utils.Json.equals(e,t),n)},assertJsonNotEquals:function(e,t,n){this.assertFalse(aria.utils.Json.equals(e,t),n)},fail:function(e){var t="Forced Failure";throw e&&(t+=" ("+e+")"),this.raiseFailure(t),{name:this.ASSERT_FAILURE,message:t}},hasError:function(){return this.getErrors().length>0},getErrors:function(){return this._errors},hasWarning:function(){return!1},getExecutionErrors:function(){var e=[],t=this.getErrors();for(var n=0,r=
t.length;n<r;n++){var i=t[n];i.type==this.ERROR_TYPES.ERROR&&e.push(i)}return e},getFailures:function(){var e=[],t=this.getErrors();for(var n=0,r=t.length;n<r;n++){var i=t[n];i.type==this.ERROR_TYPES.FAILURE&&e.push(i)}return e},raiseError:function(e,t){var n=e.description?e.description:e.message;n="["+n+"]",t&&(n+=" "+t),this._errors.push({type:this.ERROR_TYPES.ERROR,testMethod:this._currentTestName,description:n}),this.$raiseEvent({name:"error",testClass:this.$classpath,testState:this._currentTestName,exception
:e,msg:n})},raiseFailure:function(e){this._errors.push({type:this.ERROR_TYPES.FAILURE,testMethod:this._currentTestName,description:e}),this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:e})},registerObject:function(e){e.$on({"*":this._logEvent,scope:this})},unregisterObject:function(e){e.$removeListeners({"*":this._logEvent,scope:this})},_logEvent:function(e){this.evtLogs.push(e)},assertEventFired:function(e,t){t=t||"Event "+e+" not fired",this.assertTrue(this
.__hasEvent(e),t)},assertEventNotFired:function(e,t){t=t||"Event "+e+" fired",this.assertFalse(this.__hasEvent(e),t)},getEvent:function(e){for(var t=0;t<this.evtLogs.length;t++)if(this.evtLogs[t].name==e)return this.evtLogs[t];return null},__hasEvent:function(e){return this.getEvent(e)!==null},clearLogs:function(){while(this.evtLogs.length>0)this.evtLogs.pop()},registerExpectedEventsList:function(e){if(typeof e!="object")throw"registerExpectedEventsList error";this._expectedEventsList=e,this._eventIndexInList=0
,this._expectedEventsList.length===0&&(this._expectedEventsList=null)},checkExpectedEvent:function(e){if(!this._expectedEventsList)this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Unexpected event: "+e.name});else{var n=this._expectedEventsList[this._eventIndexInList],r=t(e,n);r&&this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Event does not respect what was expected (expected: "+n.name+", occured: "+
e.name+", unmatching property: "+r.join(".")+")"}),this._eventIndexInList++,this._eventIndexInList>=this._expectedEventsList.length&&(this._expectedEventsList=null)}},checkExpectedEventListEnd:function(){this._expectedEventsList!=null&&(this.$raiseEvent({name:"failure",testClass:this.$classpath,testState:this._currentTestName,description:"Not all expected events have occured. First missing event (#"+this._eventIndexInList+"): "+this._expectedEventsList[this._eventIndexInList].name}),this._expectedEventsList=
null)},overrideClass:function(e,t){this._overriddenClasses==null&&(this._overriddenClasses={});var n=this._overriddenClasses[e];if(n==null){var r=Aria.nspace(e);if(r==null)return;var i=e.lastIndexOf(".");i>-1?n={clsNs:e.slice(0,i),clsName:e.slice(i+1),initialClass:r}:n={clsNs:"",clsName:e,initialClass:r},this._overriddenClasses[e]=n}var s=Aria.nspace(n.clsNs);s[n.clsName]=t},resetClassOverrides:function(){if(this._overriddenClasses!=null){for(var e in this._overriddenClasses){var t=this._overriddenClasses[e]
,n=Aria.nspace(t.clsNs);n[t.clsName]=t.initialClass}this._overriddenClasses=null}},checkEvent:function(e){try{this.assertTrue(typeof e=="object"&&typeof e.name=="string"&&typeof e.src=="object"&&typeof e.src.$events=="object","The object passed to checkEvent is not an event.");var t=e.src.$events[e.name];this.assertTrue(t!=null,'The event "'+e.name+'" is not defined in '+e.src.$classpath);for(var n in e)n!="src"&&n!="name"&&this.assertTrue(t.properties[n]!=null,'Undocumented event property "'+n+'" in '+e.name+" from "+
e.src.$classpath)}catch(r){}}}})})();
//*******************
//LOGICAL-PATH:aria/jsunit/ConnectionSession.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.ConnectionSession",$constructor:function(e){this.requestUrl="",this.ioRequest=null,this.ioResponse=null,e.ioRequest&&this.setIORequest(e.ioRequest)},$destructor:function(){this.ioRequest=null,this.ioResponse=null},$prototype:{setIORequest:function(e){this.ioRequest=e,this.requestUrl=e.url},setIOResponse:function(){this.ioResponse=this.ioRequest.res,this.requestUrl=this.ioRequest.url},getRequestUrl:function(){return this.requestUrl}}});
//*******************
//LOGICAL-PATH:aria/jsunit/IOViewer.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.IOViewer",$singleton:!0,$constructor:function(){this._outputDiv=null,this._requests=[]},$destructor:function(){this._outputDiv=null,this._requests=null,aria.core.IO.$unregisterListeners(this)},$prototype:{outputDivId:"_IOViewerOutput_",run:function(){var e=Aria.$window.document,t=e.getElementById(this.outputDivId);t==null&&(t=e.createElement("div"),e.body.appendChild(t)),this._outputDiv=t,aria.core.IO.$on({request:this._onRequest,response:this._onResponse,scope:this
}),this._refreshDisplay()},_onRequest:function(e){this._requests[e.req.id]=e.req,this._refreshDisplay()},_onResponse:function(e){this._refreshDisplay()},_refreshDisplay:function(){var e=['<div style="font-family:Arial;font-size:12px">','<span style="font-size:15px;font-weight:bold">IO Report</span>',"<hr/>",'<div style="padding: 3px;font-size: 12px; font-weight: bold;font-family:Arial">',"Requests: ",aria.core.IO.nbRequests," (pending: ",aria.core.IO.nbRequests-aria.core.IO.nbOKResponses-aria.core.IO.nbKOResponses
,", OK: ",aria.core.IO.nbOKResponses,", failed: ",aria.core.IO.nbKOResponses,")<br />Traffic: ",aria.core.IO.trafficDown+aria.core.IO.trafficUp," bytes (down: ",aria.core.IO.trafficDown," bytes, up: ",aria.core.IO.trafficUp," bytes)","</div>",'<table style="font-size:12px;font-family:Arial; width:100%;">','<tr style="font-weight: bold;">','<td style="width: 50px;">Method</td>',"<td>URL</td>",'<td style="text-align: right; width: 50px;">Up</td>','<td style="text-align: right; width: 50px;">Down</td>','<td style="text-align: right; width: 50px;">Status</td>'
,'<td style="width: 250px;">Result</td>','<td style="width: 80px;">Duration</td>',"</tr>"];for(var t=this._requests.length-1;t>=0;t--){var n=this._requests[t];if(n){var r;if(n.res)r=['<tr style="',n.res.status=="200"?"color: green;":"color: red;",'">',"<td>",n.method,"</td>",'<td style="font-weight: bold;">',n.url,"</td>",'<td style="text-align: right;">',n.requestSize,"</td>",'<td style="text-align: right;">',n.responseSize,"</td>",'<td style="text-align: right;">',n.res.status,"</td>","<td>",n.res.error?n.
res.error:"OK","</td>","<td>",n.downloadTime," ms</td>"];else var r=["<tr>","<td>",n.method,"</td>",'<td style="font-weight: bold;">',n.url,"</td>",'<td style="text-align: right;">',n.requestSize,"</td>","<td></td>","<td></td>","<td>Pending...</td>","<td></td>"];e.push(r.join(""))}}e.push("</table>"),this._outputDiv.innerHTML=e.join("")}}});
//*******************
//LOGICAL-PATH:aria/jsunit/IRobot.js
//*******************
Aria.interfaceDefinition({$classpath:"aria.jsunit.IRobot",$interface:{KEYS:{$type:"Object"},isUsable:function(){},initRobot:{$type:"Function",$callbackParam:0},absoluteMouseMove:{$type:"Function",$callbackParam:1},mouseMove:{$type:"Function",$callbackParam:1},smoothMouseMove:{$type:"Function",$callbackParam:3},mousePress:{$type:"Function",$callbackParam:1},mouseRelease:{$type:"Function",$callbackParam:1},mouseWheel:{$type:"Function",$callbackParam:1},keyPress:{$type:"Function",$callbackParam:1},keyRelease:{$type
:"Function",$callbackParam:1}}});
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverage.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.JsCoverage",$singleton:!0,$dependencies:["aria.utils.Function","aria.jsunit.JsCoverageObject","aria.jsunit.JsCoverageReport","aria.jsunit.JsCoverageStore"],$constructor:function(){this.jsCoverageObjects=[],this.filters=[],this._reporter=new aria.jsunit.JsCoverageReport({jsCoverage:this}),this.jsCoverageStore=new aria.jsunit.JsCoverageStore},$destructor:function(){this._reporter.$dispose(),this.jsCoverageStore.$dispose();for(var e=0,t=this.jsCoverageObjects;e<t;e+=1
)this.jsCoverageObjects[e].$dispose()},$prototype:{extractData:function(){var e=0,t=0,n=Aria.$global._$jscoverage;if(!n)return;for(var r in n){if(!n.hasOwnProperty(r))continue;var i=new aria.jsunit.JsCoverageObject({data:n[r],filename:r}),s=this.isCoverageObjectValid(i);s&&(e+=i.linesCount,t+=i.coveredLinesCount,this.jsCoverageObjects.push(i))}return this.linesCount=e,this.coveredLinesCount=t,this.jsCoverageObjects},addFiltersFromString:function(e){var t=function(e,t){var n=t.filename.toLowerCase(),r=s.indexOf
("-")!==0;return n.indexOf(e)!=-1?r:!r},n=e.split(",");for(var r=0,i=n.length;r<i;r++){var s=n[r],o=aria.utils.Function.bind(t,this,s);this.addFilter(o)}},addFiltersFromQueryString:function(){var e=aria.utils.QueryString,t=e.getKeyValue("filter");if(!aria.utils.Type.isString(t))return;this.addFiltersFromString(t)},addFilter:function(e){this.filters.push(e)},reset:function(){this.filters=[],this.jsCoverageObjects=[]},isCoverageObjectValid:function(e){var t=!0,n=this.filters;for(var r=0,i=n.length;r<i;r++){var s=
n[r];s(e)||(t=!1)}return t},refresh:function(e){this.filters=[],this.jsCoverageObjects=[],this.addFiltersFromString(e),this.extractData(),this._reporter.refreshReport()},getReport:function(){return this._reporter.getReport.apply(this._reporter,arguments)},getReportForEmail:function(){return this._reporter.getReport(!0)},getFilesCount:function(){return this.jsCoverageObjects.length},getLinesCount:function(){return this.linesCount},getCoverage:function(){return Math.floor(this.coveredLinesCount/this.linesCount*100
)},store:function(e){this.jsCoverageStore.store(e)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverageObject.js
//*******************
(function(){var e={$classpath:"aria.jsunit.JsCoverageObject",$singleton:!1,$statics:{sort:function(e,t){var n=e.filename.toLowerCase(),r=t.filename.toLowerCase();return n>r?1:n==r?0:-1}},$dependencies:[],$constructor:function(e){this.filename=e.filename||"",this.source=e.source||"",this.classname=e.classname||"",this.linesCount=e.linesCount||0,this.coveredLinesCount=e.coveredLinesCount||0,this._data=e.data,this._data&&this.init(this._data)},$prototype:{init:function(e){this.source=e.source;var t=0,n=0;for(var r in 
e){if(r=="source")continue;t++,e[r]>0&&n++}this.linesCount=t,this.coveredLinesCount=n},toString:function(){return(this.classname||this.filename)+" : "+this.getCoverage()+"%"},getCoverage:function(){return Math.floor(this.coveredLinesCount/this.linesCount*100)}}};Aria.classDefinition(e)})();
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverageReport.js
//*******************
(function(){var e={$classpath:"aria.jsunit.JsCoverageReport",$singleton:!1,$dependencies:[],$constructor:function(e){this.jsCoverage=e.jsCoverage||{},this._reportContainer=null},$prototype:{getReport:function(e){var t=parseInt(this.jsCoverage.getCoverage(),10),n=this.jsCoverage.getLinesCount(),r=this.jsCoverage.getFilesCount(),i=this.jsCoverage.jsCoverageStore.getBaseReportsURL(),s="<a href='"+i+"jscoverage.html' target='_blank'>"+"Global Coverage"+"</a>",o=["<h2>JsCoverage report</h2><br>","<table style='border-collapse: collapse;font-size: small;'>"
,"<tbody>"];return e?o.push("<tr><td width='350px'><strong>"+s+"</strong> (on "+r+" files and "+n+" lines)</td>","<td><strong>",t,"%<strong></td>",'<td width="100px"><table><tbody><tr>','<td bgcolor="lime" width="'+t+'px"/>','<td bgcolor="red" width="'+(100-t)+'px"/>',"</tr></tbody></table></td></tr><br>"):o.push("<tr>","<td><strong>"+s+"</strong> (on "+r+" files and "+n+" lines)</td>","<td><strong>",t,"%</td>",'<td style="float: right;margin-right: 5px;">','<div style="background-color: #E00000;border: 1px solid #000000;float: right;height: 10px;margin-top: 4px;overflow: hidden;width: 100px;">'
,'<div style="background-color: #00F000;height: 10px;width: '+t+'px;"></div>',"</div>","</td>","</tr>"),o.push("</tbody>","</table>"),o.join("")},_createJsCoverageReport:function(){var e=Aria.$window.document,t=e.createElement("div");t.id="jsCoverageTableContainer",t.style.cssText=["background-color: white","border: 3px solid Grey","top: 100px","bottom: 100px","left: 295px","overflow-y: auto","padding: 0 10px 10px","position: absolute","width: 600px","z-index: 1"].join(";"),e.body.appendChild(t),this._reportContainer=
t,this.refreshReport()},showReport:function(){this._reportContainer||this._createJsCoverageReport(),this._reportContainer.style.display="block"},refreshReport:function(){this._reportContainer||this._createJsCoverageReport();var e=this.getReport();this._reportContainer.innerHTML=e},hideReport:function(){this._reportContainer||this._createJsCoverageReport(),this._reportContainer.style.display="none"}}};Aria.classDefinition(e)})();
//*******************
//LOGICAL-PATH:aria/jsunit/JsCoverageStore.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.JsCoverageStore",$dependencies:["aria.utils.Date","aria.core.Browser"],$statics:{baseReportsURL:"http://aria/jscoverage-reports/",baseStoreURL:"http://aria/jscoverage-store/"},$constructor:function(){this.reportDate=aria.utils.Date.format(new Date,"yyyy'_'MM'_'dd'_'hh'_'mm'_'ss"),this._urlSuffix=aria.core.Browser.name.toLowerCase()+"/"+this.reportDate+"/"},$prototype:{store:function(e){this.storeReport(),e.callback&&e.callback.fn.call(e.callback.scope)},storeReport
:function(){var e=this.getBaseStoreURL(),t=this.getJSONReport();this.sendJSONReport(t,e)},getBaseStoreURL:function(){return this.baseStoreURL+this._getURLSuffix()},getBaseReportsURL:function(){return this.baseReportsURL+this._getURLSuffix()},_getURLSuffix:function(){return this._urlSuffix},sendJSONReport:function(e,t){var n=function(){if(Aria.$global.XMLHttpRequest)return new Aria.$global.XMLHttpRequest;if(Aria.$global.ActiveXObject)return new Aria.$global.ActiveXObject("Microsoft.XMLHTTP")},r=n();r.open("POST"
,t,!1),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Content-Length",e.length.toString()),r.send(e);if(r.status===200||r.status===201||r.status===204)return r.responseText;throw r.status},getJSONReport:function(){var e=function(e){return"0000".substr(e.length)+e},t=function(t){return'"'+t.replace(/[\u0000-\u001f"\\\u007f-\uffff]/g,function(t){switch(t){case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case'"':return'\\"';case"\\"
:return"\\\\";default:return"\\u"+e(t.charCodeAt(0).toString(16))}})+'"'},n=[],r=Aria.$global._$jscoverage;if(r)for(var i in r){if(!r.hasOwnProperty(i))continue;var s=r[i],o=[],u=s.length;for(var a=0;a<u;a++){var f=s[a];if(f===undefined||f===null)f="null";o.push(f)}var l=s.source,c=[];u=l.length;for(var a=0;a<u;a++)c.push(t(l[a]));n.push(t(i)+(':{"coverage":['+o.join(",")+'],"source":['+c.join(",")+"]}"))}return n="{"+n.join(",")+"}",n}}});
//*******************
//LOGICAL-PATH:aria/jsunit/LayoutTester.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.LayoutTester",$singleton:!0,$statics:{excludeRegExp:/"^(script|noscript|style|option)$"/gi},$constructor:function(){this.elements=[]},$prototype:{captureJsonScreenshot:function(e){return this.elements=[],e||(e=Aria.$window.document.body),this._captureJsonScreenshot(e),this.elements},_captureJsonScreenshot:function(e){var t=this.excludeRegExp,n=e.childNodes;for(var r=0,i=n.length;r<i;r++){var s=n[r];s.tagName&&!t.test(s.tagName)&&(this._isHumanVisible(s)&&this._saveElement
(s),this._captureJsonScreenshot(s))}},compare:function(e){if(!e)return["Array to compare is null"];var t=[],n=this.elements;if(e.length!=n.length){t.push("The items number is not the same");for(var r=0,i=n.length;r<i;r++)if(!e[r]||!this.itemCompare(n[r],e[r])){t.push("Different from item "+r);break}return t}for(var r=0,i=n.length;r<i;r++)(!e[r]||!this.itemCompare(n[r],e[r]))&&t.push("Item "+r+" is different");return t},itemCompare:function(e,t){for(var n in e)if(n!="element"&&e[n]!==t[n])return!1;return!0},_saveElement
:function(e){var t=this._getCoordinates(e),n=this._getDirectTextContent(e);this.elements.push({element:e,id:e.id,tagName:e.tagName,top:t.top,left:t.left,width:t.width,height:t.height,text:n})},_isHumanVisible:function(e){if(e.tagName.toLowerCase()=="img")return!0;if(e.style.display=="none"||e.style.visibility=="hidden")return!1;var t=this._getCoordinates(e);return t.width===0&&t.height===0?!1:this._hasDirectChildText(e)?!0:this._hasStyleThatMakesItVisible(e)},_hasDirectChildText:function(e){return this._getDirectTextContent
(e)!==""},_hasStyleThatMakesItVisible:function(e){var t=e.currentStyle||e.ownerDocument.defaultView.getComputedStyle(e,null);return t.border!==""||t.borderWidth!==""||t.borderTopWidth!==""||t.borderLeftWidth!==""||t.borderBottomWidth!==""||t.borderRightWidth!==""||t.background!==""&&t.background!=="none"||t.backgroundImage!==""&&t.backgroundImage!=="none"||t.backgroundColor!==""&&t.backgroundColor!=="transparent"},_getCoordinates:function(e){var t=e.getBoundingClientRect(),n={};return n.top=Math.round(t.top)
,n.left=Math.round(t.left),n.width=Math.round(t.width||e.offsetWidth),n.height=Math.round(t.height||e.offsetHeight),n},_getDirectTextContent:function(e){if(e.tagName.toLowerCase()=="input"&&e.getAttribute("type")=="text")return e.value;var t=e.childNodes,n="";for(var r=0,i=t.length;r<i;r++){var s=t[r];if(s.nodeType==3){var o=s.textContent||s.innerText||s.nodeValue;o&&(o=o.replace(/(\r\n|[\r\n])/g,"").replace(new RegExp(String.fromCharCode(160),"g")," ").replace(/^\s+|\s+$/g,""),o!==""&&(n+=o))}}return n}}});
//*******************
//LOGICAL-PATH:aria/jsunit/ModuleCtrlTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.ModuleCtrlTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.TestMsgHandler","aria.modules.RequestMgr"],$constructor:function(){this.$TestCase.constructor.call(this),this.cxLogs=[],aria.core.IOFiltersMgr.addFilter({classpath:"aria.jsunit.TestMsgHandler",initArgs:this})},$destructor:function(){aria.core.IOFiltersMgr.removeFilter({classpath:"aria.jsunit.TestMsgHandler",initArgs:this}),this.cxLogs=null,this.evtLogs=null,this.$TestCase.$destructor.
call(this)},$prototype:{clearLogs:function(){while(this.cxLogs.length>0)this.cxLogs.pop().$dispose();this.$TestCase.clearLogs.apply(this)},registerController:function(e){this.registerObject(e)},assertEvent:function(e,t){t=t||"Event "+e+" not fired",this.assertEventFired(e,t)},assertLogsClean:function(e){e=e||"assertLogsClean failed",this.assertFalse(this.__hasErrorInLogs(),e)},assertLogsNotClean:function(e){e=e||"assertLogsNotClean failed",this.assertTrue(this.__hasErrorInLogs(),e)},__hasErrorInLogs:function(
){for(var e=0;e<this.evtLogs.length;e++)if(this.evtLogs[e].name=="error")return!0;for(var t=0;t<this.cxLogs.length;t++)if(this.cxLogs[t].ioResponse.error!=null)return!0;return!1}}});
//*******************
//LOGICAL-PATH:aria/jsunit/MultiSelectTemplateTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.MultiSelectTemplateTestCase",$extends:"aria.jsunit.TemplateTestCase",$constructor:function(){this.$TemplateTestCase.constructor.call(this)},$prototype:{_MSClick:function(e,t,n){n.synEvent.click(e,{fn:t,scope:n})},_MSType:function(e,t,n,r){r.synEvent.type(e,t,{fn:n,scope:r})},getCheckBox:function(e,t){var n=this.getWidgetInstance(e),r=n.controller.getListWidget();return r._tplWidget?r._tplWidget.subTplCtxt._mainSection._content[1]._content[0].section._content[t].behavior
:null},toggleMultiSelectOption:function(e,t,n){var r=this.getCheckBox(e,t).getDom();r&&this.synEvent.click(r,{fn:n,scope:this})},isMultiSelectOpen:function(e){var t=this.getWidgetInstance(e).controller.getListWidget();return!!(t&&t._tplWidget&&t._tplWidget.subTplCtxt)},toggleMultiSelectOn:function(e,t){var n=this.getMultiSelectIcon(e);this.synEvent.click(n,{fn:this.__waitMSOpenByClick,scope:this,args:[e,t]})},toggleMultiSelectOff:function(e,t){var n=this.getMultiSelectIcon(e);this.synEvent.click(n,{fn:t,scope
:this})},waitUntilMsOpened:function(e,t){this.__waitUntilMsState(e,t,!0)},waitUntilMsClosed:function(e,t){this.__waitUntilMsState(e,t,!1)},__waitUntilMsState:function(e,t,n){this.waitFor({condition:function(){var t=this.isMultiSelectOpen(e);return n?t:!t},callback:{fn:t,scope:this}})},__waitMSOpenByClick:function(e,t){var n=t[0],r=t[1];this.waitUntilMsOpened(n,r)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/NewTestRunner.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.NewTestRunner",$events:{preloadBegin:"preloadBegin",preloadEnd:"preloadEnd",campaignBegin:"campaignBegin",campaignEnd:"campaignEnd",campaignChange:"campaignChange"},$dependencies:["aria.jsunit.TestEngine","aria.jsunit.TestReport","aria.core.Log","aria.jsunit.TestWrapper"],$constructor:function(){this._testEngine=null,this._reporter=new aria.jsunit.TestReport({testRunner:this}),this.__overrideGetURLWithTimestamp(),this._rootClasspath="",this.runIsolated=!1},$destructor
:function(){this._testEngine&&this._testEngine.$dispose(),this._reporter&&this._reporter.$dispose(),this._outputDiv=null},$prototype:{getReporter:function(){return this._reporter},preload:function(){this.$raiseEvent("preloadBegin");var e=Aria.getClassRef(this._rootClasspath);e.prototype.$TestSuite?(this._rootTest=new e,this._rootTest.$on({preloadEnd:{fn:this._onPreloadEnd,scope:this}}),this._rootTest.preload()):(this.runIsolated?this._rootTest=new aria.jsunit.TestWrapper(this._rootClasspath):this._rootTest=new 
e,this.$raiseEvent("preloadEnd"))},_onPreloadEnd:function(){this.$raiseEvent("preloadEnd")},setRootClasspath:function(e){this._rootClasspath=e},run:function(e,t){this.__overrideLogError(),this.$raiseEvent("campaignBegin");var n=this.getEngine();n.runTest(this._rootTest,t)},__overrideLogError:function(){var e=aria.core.JsObject.prototype.$logError;aria.core.JsObject.prototype.$logError=function(t,n,r){var i=aria.core.Log.prepareLoggedMessage(t,n),s=r?". Error : "+r.message:"";return Aria.__runtimeErrors||(Aria
.__runtimeErrors=[]),Aria.__runtimeErrors.push(i+s),e.apply(this,arguments)}},__overrideGetURLWithTimestamp:function(){var e=aria.core.DownloadMgr.getURLWithTimestamp;aria.core.DownloadMgr.getURLWithTimestamp=function(t,n){return e.apply(aria.core.DownloadMgr,[t,!0])}},_onChange:function(e){var t=e.changeType;if(t=="testStart"||t=="testEnd")this.$raiseEvent("campaignChange"),this._testEngine.isFinished()&&this.$raiseEvent("campaignEnd")},_getTestCases:function(e){var t=[];if(!e.$TestSuite)return[{classpath:e
.$classpath,instance:e}];if(e.isSkipped()||e.isSelected()===-1)return[];var n=e.getSubTests();for(var r=0,i=n.length;r<i;r++){var s=n[r];if(s.classpath.indexOf("TestSuite")!=-1){var o=this._getTestCases(s.instance);t=t.concat(o)}else t.push(s)}return t},getTestCases:function(){return this._getTestCases(this._rootTest)},getTestsCount:function(){var e=this._rootTest;return this._getTestCases(e).length},getFinishedTests:function(){var e=this.getTestCases(),t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i.instance&&
i.instance._isFinished&&t.push(i)}return t},getFinishedTestsCount:function(){return this.getFinishedTests().length},getFailedTests:function(){var e=this.getTestCases(),t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];i.instance&&i.instance.hasError()&&t.push(i)}return t},getReport:function(){return this.getReporter().getReport()},getEngineReport:function(){var e=this._testEngine;return e.testReport},getEngine:function(){return this._testEngine==null&&(this._testEngine=new aria.jsunit.TestEngine,this._testEngine
.runIsolated=this.runIsolated,this._testEngine.$on({change:this._onChange,scope:this})),this._testEngine}}});
//*******************
//LOGICAL-PATH:aria/jsunit/Robot.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.Robot",$singleton:!0,$statics:{ROBOT_UNAVAILABLE:"There is no usable implementation of the robot.",BUTTON1_MASK:16,BUTTON2_MASK:8,BUTTON3_MASK:4},$constructor:function(){this.robot=null},$prototype:{getRobotClasspath:function(){if(Aria.$frameworkWindow.top.phantomJSRobot)return"aria.jsunit.RobotPhantomJS";var e=Aria.$window.navigator;try{var t=e&&e.javaEnabled();if(t)return"aria.jsunit.RobotJavaApplet"}catch(n){return null}},isUsable:function(){return!!this.getRobotClasspath
()},initRobot:function(e){if(this.robot)this.robot.initRobot(e);else{var t=this.getRobotClasspath();if(!t){this.$logError(this.ROBOT_UNAVAILABLE);return}Aria.load({classes:[t],oncomplete:{fn:this._robotLoaded,scope:this,args:{robotClasspath:t,cb:e}}})}},_robotLoaded:function(e){this.robot||(this.robot=Aria.getClassRef(e.robotClasspath).$interface("aria.jsunit.IRobot")),this.robot.initRobot(e.cb)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/RobotJavaApplet.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.RobotJavaApplet",$dependencies:["aria.utils.Dom","aria.utils.AriaWindow","aria.utils.StringCallback"],$implements:["aria.jsunit.IRobot"],$singleton:!0,$constructor:function(){this._robotInitialized=!1,this._initStringCb=null,aria.utils.AriaWindow.$on({unloadWindow:this._reset,scope:this})},$destructor:function(){this._reset(),aria.utils.AriaWindow.$unregisterListeners(this)},$events:{appletInitialized:"Raised when the applet is initialized."},$statics:{KEYS:{VK_0
:48,VK_1:49,VK_2:50,VK_3:51,VK_4:52,VK_5:53,VK_6:54,VK_7:55,VK_8:56,VK_9:57,VK_A:65,VK_ACCEPT:30,VK_ADD:107,VK_AGAIN:65481,VK_ALL_CANDIDATES:256,VK_ALPHANUMERIC:240,VK_ALT:18,VK_ALT_GRAPH:65406,VK_AMPERSAND:150,VK_ASTERISK:151,VK_AT:512,VK_B:66,VK_BACK_QUOTE:192,VK_BACK_SLASH:92,VK_BACK_SPACE:8,VK_BEGIN:65368,VK_BRACELEFT:161,VK_BRACERIGHT:162,VK_C:67,VK_CANCEL:3,VK_CAPS_LOCK:20,VK_CIRCUMFLEX:514,VK_CLEAR:12,VK_CLOSE_BRACKET:93,VK_CODE_INPUT:258,VK_COLON:513,VK_COMMA:44,VK_COMPOSE:65312,VK_CONTEXT_MENU:525,VK_CONTROL
:17,VK_CONVERT:28,VK_COPY:65485,VK_CUT:65489,VK_D:68,VK_DEAD_ABOVEDOT:134,VK_DEAD_ABOVERING:136,VK_DEAD_ACUTE:129,VK_DEAD_BREVE:133,VK_DEAD_CARON:138,VK_DEAD_CEDILLA:139,VK_DEAD_CIRCUMFLEX:130,VK_DEAD_DIAERESIS:135,VK_DEAD_DOUBLEACUTE:137,VK_DEAD_GRAVE:128,VK_DEAD_IOTA:141,VK_DEAD_MACRON:132,VK_DEAD_OGONEK:140,VK_DEAD_SEMIVOICED_SOUND:143,VK_DEAD_TILDE:131,VK_DEAD_VOICED_SOUND:142,VK_DECIMAL:110,VK_DELETE:127,VK_DIVIDE:111,VK_DOLLAR:515,VK_DOWN:40,VK_E:69,VK_END:35,VK_ENTER:10,VK_EQUALS:61,VK_ESCAPE:27,VK_EURO_SIGN
:516,VK_EXCLAMATION_MARK:517,VK_F:70,VK_F1:112,VK_F10:121,VK_F11:122,VK_F12:123,VK_F13:61440,VK_F14:61441,VK_F15:61442,VK_F16:61443,VK_F17:61444,VK_F18:61445,VK_F19:61446,VK_F2:113,VK_F20:61447,VK_F21:61448,VK_F22:61449,VK_F23:61450,VK_F24:61451,VK_F3:114,VK_F4:115,VK_F5:116,VK_F6:117,VK_F7:118,VK_F8:119,VK_F9:120,VK_FINAL:24,VK_FIND:65488,VK_FULL_WIDTH:243,VK_G:71,VK_GREATER:160,VK_H:72,VK_HALF_WIDTH:244,VK_HELP:156,VK_HIRAGANA:242,VK_HOME:36,VK_I:73,VK_INPUT_METHOD_ON_OFF:263,VK_INSERT:155,VK_INVERTED_EXCLAMATION_MARK
:518,VK_J:74,VK_JAPANESE_HIRAGANA:260,VK_JAPANESE_KATAKANA:259,VK_JAPANESE_ROMAN:261,VK_K:75,VK_KANA:21,VK_KANA_LOCK:262,VK_KANJI:25,VK_KATAKANA:241,VK_KP_DOWN:225,VK_KP_LEFT:226,VK_KP_RIGHT:227,VK_KP_UP:224,VK_L:76,VK_LEFT:37,VK_LEFT_PARENTHESIS:519,VK_LESS:153,VK_M:77,VK_META:157,VK_MINUS:45,VK_MODECHANGE:31,VK_MULTIPLY:106,VK_N:78,VK_NONCONVERT:29,VK_NUM_LOCK:144,VK_NUMBER_SIGN:520,VK_NUMPAD0:96,VK_NUMPAD1:97,VK_NUMPAD2:98,VK_NUMPAD3:99,VK_NUMPAD4:100,VK_NUMPAD5:101,VK_NUMPAD6:102,VK_NUMPAD7:103,VK_NUMPAD8
:104,VK_NUMPAD9:105,VK_O:79,VK_OPEN_BRACKET:91,VK_P:80,VK_PAGE_DOWN:34,VK_PAGE_UP:33,VK_PASTE:65487,VK_PAUSE:19,VK_PERIOD:46,VK_PLUS:521,VK_PREVIOUS_CANDIDATE:257,VK_PRINTSCREEN:154,VK_PROPS:65482,VK_Q:81,VK_QUOTE:222,VK_QUOTEDBL:152,VK_R:82,VK_RIGHT:39,VK_RIGHT_PARENTHESIS:522,VK_ROMAN_CHARACTERS:245,VK_S:83,VK_SCROLL_LOCK:145,VK_SEMICOLON:59,VK_SEPARATOR:108,VK_SHIFT:16,VK_SLASH:47,VK_SPACE:32,VK_STOP:65480,VK_SUBTRACT:109,VK_T:84,VK_TAB:9,VK_U:85,VK_UNDEFINED:0,VK_UNDERSCORE:523,VK_UNDO:65483,VK_UP:38,VK_V
:86,VK_W:87,VK_WINDOWS:524,VK_X:88,VK_Y:89,VK_Z:90}},$prototype:{isUsable:function(){var e=Aria.$window.navigator;try{var t=e&&e.javaEnabled();return!!t}catch(n){return!1}},initRobot:function(e){if(this.applet==null){var t=Aria.$window.document,n=aria.core.DownloadMgr.resolveURL("aria/jsunit/robot-applet.jnlp"),r=t.createElement("applet"),i=t.createElement("param");i.setAttribute("name","jnlp_href"),i.setAttribute("value",n),r.appendChild(i);var s=t.createElement("param");s.setAttribute("name","initCallback"
),this._initStringCb||(this._initStringCb=aria.utils.StringCallback.createStringCallback({scope:this,fn:this._callCallback,args:this._raiseInitEvent,resIndex:-1})),s.setAttribute("value",this._initStringCb),r.appendChild(s),r.setAttribute("width","1"),r.setAttribute("height","1");var o=aria.core.DownloadMgr.resolveURL("aria/jsunit/robot-applet.jar",!0);r.setAttribute("archive",o),r.setAttribute("code","com.amadeus.ui.aria.robotapplet.RobotApplet"),r.style.cssText="position:absolute;display:block;left:0px;top:0px;width:1px;height:1px;z-index:-1;"
,t.body.appendChild(r),this.applet=r,aria.utils.AriaWindow.attachWindow()}e&&(this._robotInitialized?this.$callback(e):this.$onOnce({appletInitialized:e}))},_raiseInitEvent:function(){this._robotInitialized=!0,this._initStringCb=null,this.$raiseEvent("appletInitialized")},_reset:function(){var e=this.applet;if(e!=null){var t=Aria.$window;t.document.body.removeChild(e),this._robotInitialized?this._robotInitialized=!1:this.$unregisterListeners(),this.applet=null,aria.utils.AriaWindow.detachWindow()}},_updateAppletPosition
:function(e){var t=this.applet,n=t.ownerDocument,r=aria.utils.Dom._getDocumentScroll();t.style.left=r.scrollLeft+"px",t.style.top=r.scrollTop+"px",this._callCallback(e)},absoluteMouseMove:function(e,t){this.applet.absoluteMouseMove(e.x,e.y),this._callCallback(t)},mouseMove:function(e,t){var n=aria.utils.Dom._getViewportSize();(e.x<0||e.y<0||e.x>n.width||e.y>n.height)&&this.$logWarn("MouseMove position outside of the viewport."),this._updateAppletPosition({fn:this._mouseMoveCb,args:{position:e,cb:t}})},_mouseMoveCb
:function(e,t){var n=t.position;this.applet.mouseMove(n.x,n.y),this._callCallback(t.cb)},smoothMouseMove:function(e,t,n,r){var i=aria.utils.Dom._getViewportSize();(e.x<0||e.y<0||e.x>i.width||e.y>i.height||t.x<0||t.y<0||t.x>i.width||t.y>i.height)&&this.$logWarn("smoothMouseMove from or to position outside of the viewport."),this._updateAppletPosition({fn:this._smoothMouseMoveCb,args:{from:e,to:t,duration:n,cb:r}})},_smoothMouseMoveCb:function(e,t){var n=t.from,r=t.to;this.applet.smoothMouseMove(n.x,n.y,r.x,r.
y,t.duration,aria.utils.StringCallback.createStringCallback({fn:this._callCallback,scope:this,args:t.cb,resIndex:-1}))},mousePress:function(e,t){this.applet.mousePress(e),this._callCallback(t)},mouseRelease:function(e,t){this.applet.mouseRelease(e),this._callCallback(t)},mouseWheel:function(e,t){this.applet.mouseWheel(e),this._callCallback(t)},keyPress:function(e,t){this.applet.keyPress(e),this._callCallback(t)},keyRelease:function(e,t){this.applet.keyRelease(e),this._callCallback(t)},screenCapture:function(
e,t,n){var r=aria.utils.Dom._getViewportSize();if(e.x<0||e.y<0||e.width<0||e.height<0||e.x+e.width>r.width||e.y+e.height>r.height){this.$logError("Screen capture area outside of the viewport.");return}this._updateAppletPosition({fn:this._screenCaptureCb,args:{geometry:e,imageName:t,cb:n}})},_screenCaptureCb:function(e,t){var n=t.geometry;this.applet.screenCapture(n.x,n.y,n.width,n.height,t.imageName),this.$callback(t.cb)},compareImages:function(e,t){return this.applet.compareImages(e,t)},loadImage:function(e
,t){this.applet.loadImage(e,t)},saveImage:function(e,t){this.applet.saveImage(e,t)},_callCallback:function(e){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:e,delay:50})},getWin32Api:function(){return this.applet.getWin32Api()}}});
//*******************
//LOGICAL-PATH:aria/jsunit/RobotPhantomJS.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.RobotPhantomJS",$implements:["aria.jsunit.IRobot"],$singleton:!0,$constructor:function(){this.offsetX=0,this.offsetY=32;var e;Aria.$frameworkWindow&&(this._robot=e=Aria.$frameworkWindow.top.phantomJSRobot);if(!e)return;this._sendEvent=this._robot.sendEvent,this._keyShift=!1,this._lastMousePosition={x:0,y:0};var t=this.KEYS,n=e.keys;for(var r in n)if(n.hasOwnProperty(r)){var i="VK_"+r.toUpperCase();t[i]||(t[i]=n[r])}},$statics:{MOUSEWHEEL_NOT_IMPLEMENTED:"mouseWheel is not implemented"
,BUTTONS:{16:"left",8:"middle",4:"right"},KEYS:{VK_TAB:"	",VK_SPACE:" ",VK_BACK_SPACE:"\b",VK_ENTER:"\r",VK_MULTIPLY:"*",VK_PLUS:"+",VK_MINUS:"-",VK_PERIOD:".",VK_SLASH:"/",VK_SEMICOLON:";",VK_COLON:":",VK_EQUALS:"=",VK_COMMA:",",VK_BACK_QUOTE:"`",VK_BACK_SLASH:"\\",VK_QUOTE:"'",VK_QUOTEDBL:'"',VK_LEFT_PARENTHESIS:"(",VK_RIGHT_PARENTHESIS:")"}},$prototype:{$init:function(e){var t=e.KEYS,n="Z".charCodeAt(0);for(var r="A".charCodeAt(0);r<=n;r++){var i=String.fromCharCode(r);t["VK_"+i.toUpperCase()]=i.toLowerCase
()}for(var s=0;s<10;s++)t["VK_"+s]=""+s},isUsable:function(){return!!this._robot},initRobot:function(e){this.isUsable()&&this.$callback(e)},_translateCoordinates:function(e){return{x:e.x+this.offsetX,y:e.y+this.offsetY}},mouseMove:function(e,t){var n=this._translateCoordinates(e);this.absoluteMouseMove(n,t)},absoluteMouseMove:function(e,t){var n=this._lastMousePosition;n.x=e.x,n.y=e.y,this._sendEvent("mousemove",e.x,e.y),this._callCallback(t)},smoothMouseMove:function(e,t,n,r){var i=this._translateCoordinates
(e),s=this._translateCoordinates(t);this.smoothAbsoluteMouseMove(i,s,n,r)},smoothAbsoluteMouseMove:function(e,t,n,r){this.absoluteMouseMove(e,{fn:this._stepSmoothAbsoluteMouseMove,scope:this,resIndex:-1,args:{from:e,to:t,duration:n,cb:r,endTime:(new Date).getTime()+n}})},_stepSmoothAbsoluteMouseMove:function(e){var t=(e.endTime-(new Date).getTime())/e.duration,n=e.to;if(t<0){this.absoluteMouseMove(n,e.cb);return}var r=e.from;this.absoluteMouseMove({x:t*r.x+(1-t)*n.x,y:t*r.y+(1-t)*n.y},{fn:this._stepSmoothAbsoluteMouseMove
,scope:this,resIndex:-1,args:e})},mousePress:function(e,t){var n=this._lastMousePosition;this._sendEvent("mousedown",n.x,n.y,this.BUTTONS[e]),this._callCallback(t)},mouseRelease:function(e,t){var n=this._lastMousePosition;this._sendEvent("mouseup",n.x,n.y,this.BUTTONS[e]),this._callCallback(t)},mouseWheel:function(e,t){this.$logError(this.MOUSEWHEEL_NOT_IMPLEMENTED)},keyPress:function(e,t){e==this.KEYS.VK_SHIFT&&(this._keyShift=!0),typeof e=="string"&&this._keyShift&&(e=e.toUpperCase()),this._sendEvent("keydown"
,e),this._callCallback(t)},keyRelease:function(e,t){typeof e=="string"&&this._keyShift&&(e=e.toUpperCase()),e==this.KEYS.VK_SHIFT&&(this._keyShift=!1),this._sendEvent("keyup",e),this._callCallback(t)},_callCallback:function(e){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:e,delay:200})}}});
//*******************
//LOGICAL-PATH:aria/jsunit/RobotTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.RobotTestCase",$extends:"aria.jsunit.TemplateTestCase",$dependencies:["aria.jsunit.SynEvents","aria.jsunit.Robot"],$constructor:function(){this.$TemplateTestCase.constructor.call(this),this.synEvent=aria.jsunit.SynEvents},$destructor:function(){this.synEvent=null,this.$TemplateTestCase.$destructor.call(this)},$prototype:{run:function(){if(this.skipTest)this.$TemplateTestCase.run.call(this);else{var e=aria.jsunit.Robot;e.isUsable()?e.initRobot({fn:this.$TemplateTestCase
.run,scope:this}):(this._startTest(),this.raiseFailure("Robot test cases require Java to be enabled"),this._endTest())}}}});
//*******************
//LOGICAL-PATH:aria/jsunit/ScreenCapture.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.ScreenCapture",$dependencies:["aria.jsunit.AppletWorker"],$singleton:!0,$constructor:function(){this._applet=aria.jsunit.AppletWorker},$destructor:function(){this._applet=null,delete this._applet},$statics:{MISSING_APPLET_WORKER:"[Aria JsUnit] Missing applet communication bridge in %1"},$prototype:{_prepareInstructionString:function(e,t,n,r,i,s,o){var u=Aria.$frameworkWindow.document,a=[e,u.title,t,n||0,r||0,i||0,s||0,o||0].join(";");return a},capture:function(e)
{if(!this._applet.isReady()){this.$logWarn(this.MISSING_APPLET_WORKER,this.$classpath);var t=Aria.$global.console;return t&&t.warn("Missing applet communication bridge in aria.jsunit.ScreenCapture"),!1}var n=e.conf,r=this._prepareInstructionString("CAPTURE",e.useCaseName,n.x,n.y,n.width,n.height,n.threshold);return this._applet.sendInstruction({instruction:r,cb:e.oncomplete,scope:e.scope,args:e.args}),n=null,!0},getResponse:function(){return this._applet.isReady()?this._applet.getResponse():(this.$logError(this
.MISSING_APPLET_WORKER,this.$classpath),{code:1,reason:"Missing applet worker"})}}});
//*******************
//LOGICAL-PATH:aria/jsunit/SikuliTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.SikuliTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.RobotJavaApplet"],$statics:{settings:{browserPath:""},FAILED_OPENING_BROWSER:"The browser could not be opened. Command line used: %1"},$constructor:function(){this.$TestCase.constructor.call(this),this.imagesRoot=aria.core.DownloadMgr.resolveURL(this.$package.replace(/\./g,"/",!0))+"/",this.robot=null,this.screen=null,this.KeyModifier=null,this.Key=null},$destructor:function(){this.robot=
null,this.screen=null,this.KeyModifier=null,this.Key=null,this.$TestCase.$destructor.call(this)},$prototype:{testAsyncRunSikuliTest:function(){aria.jsunit.RobotJavaApplet.initRobot({fn:this._robotStarted,scope:this})},_robotStarted:function(){this.robot=aria.jsunit.RobotJavaApplet.applet,this.screen=this.robot.createSikuliScreen(),this.KeyModifier=this.robot.Packages.org.sikuli.script.KeyModifier,this.Key=this.robot.Packages.org.sikuli.script.Key;try{this.runSikuliTest()}catch(e){this.handleAsyncTestError(e)
}},image:function(e){return this.robot.createPattern(this.imagesRoot+e)},runSikuliTest:function(){this.sikuliTestEnd()},sikuliTestEnd:function(){this.notifyTestEnd("testAsyncRunSikuliTest")},openURL:function(e){var t=this.settings.browserPath,n=t.replace(/\%url\%/,e),r=this.robot.createApp(n),i=r.open();return i==null?(this.$logError(this.FAILED_OPENING_BROWSER,[n]),!1):!0}}});
//*******************
//LOGICAL-PATH:aria/jsunit/SonarReport.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.SonarReport",$dependencies:["aria.core.Browser"],$statics:{REPORT_SEPARATOR:"###__REPORT__DELIMITER__###",LINE_SEPARATOR:"####",TAB_SEPARATOR:"#TT#"},$constructor:function(e){this.testRunner=e.testRunner;var t=aria.core.Browser.toString().replace(/ /g,"_").replace(/\./g,""),n=aria.core.Browser.environment;this.__browserInfo=t+"_"+n+"."},$destructor:function(){this.testRunner=null},$prototype:{getReport:function(){var e="",t=[],n=this.testRunner.getTestCases();for(
var r=0,i=n.length;r<i;r++){var s=n[r].instance;t.push(this.__getTestCaseReport(s))}return e=t.join(this.REPORT_SEPARATOR),e},__getTestCaseReport:function(e){var t=this.__formatTestCaseReport(e);return t},__getTestSuiteName:function(e){return this.__browserInfo+e.$classpath},__formatTestCaseReport:function(e){var t=["<?xml version='1.0' encoding='UTF-8' ?>"],n=this.__getTestCaseSubTests(e),r=e.getErrors();t.push(["<testsuite","name='"+this.__getTestSuiteName(e)+"'","errors='"+e.getExecutionErrors().length+"'"
,"failures='"+e.getFailures().length+"'","tests='"+n.length+"'","skipped='0'","time='"+e.getExecutionTime()/1e3+"'",">"].join(" "));for(var i=0,s=n.length;i<s;i++){var o=n[i],u=this.__formatSubTestReport(o,e);t.push(u)}t.push("</testsuite>");var a=t.join(this.LINE_SEPARATOR);return a},__getTestCaseSubTests:function(e){var t=[],n=e.getErrors();for(var r in e)if(r.match(/^test/)&&typeof e[r]=="function"){var i={name:r,status:"success",time:0,errors:[]};for(var s=0,o=n.length;s<o;s++){var u=n[s];i.name+"()"==u.
testMethod&&(i.status="error",i.errors.push(u))}t.push(i)}return t},__formatSubTestReport:function(e,t){var n="",r=e.errors;if(r.length>0){n=this.TAB_SEPARATOR+"<testcase classname='"+this.__getTestSuiteName(t)+"' time='"+e.time+"' name='"+e.name+"'>";for(var i=0,s=r.length;i<s;i++){var o=r[i];n+=this.LINE_SEPARATOR+this.TAB_SEPARATOR+this.TAB_SEPARATOR,o.state=="failure"?n+="<failure>"+o.description+"</failure>":n+="<error>"+o.description+"</error>"}n+=this.LINE_SEPARATOR+this.TAB_SEPARATOR+"</testcase>"}else n=
this.TAB_SEPARATOR+"<testcase classname='"+t.$classpath+"' time='"+e.time+"' name='"+e.name+"'/>";return n}}});
//*******************
//LOGICAL-PATH:aria/jsunit/SynEvents.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.SynEvents",$singleton:!0,$dependencies:["aria.jsunit.Robot"],$constructor:function(){this._robot=aria.jsunit.Robot},$destructor:function(){this._robot=null},$prototype:{_keys:{CTRL:"CONTROL","	":"TAB"," ":"SPACE","\b":"BACK_SPACE","\r":"ENTER","*":"MULTIPLY","+":"PLUS","-":"MINUS",".":"PERIOD","/":"SLASH",";":"SEMICOLON",":":"COLON","=":"EQUALS",",":"COMMA","`":"BACK_QUOTE","\\":"BACK_SLASH","'":"QUOTE",'"':"QUOTEDBL","(":"LEFT_PARENTHESIS",")":"RIGHT_PARENTHESIS"
},_methods:{initRobot:0,mouseMove:1,smoothMouseMove:3,absoluteMouseMove:1,mousePress:1,mouseRelease:1,mouseWheel:1,keyPress:1,keyRelease:1,ensureVisible:1,focus:1,pause:1,click:1,type:2,move:2,drag:2,execute:1},execute:function(e,t){this._executeCb(0,{array:e,curIdx:0,cb:t})},_executeCb:function(e,t){var n=t.array,r=t.curIdx;if(t.curIdx>=n.length)this.$callback(t.cb);else{var i=n[r],s=t.curIdx++;if(!aria.utils.Type.isArray(i)){this.$logError("Not an array");return}var o=i.shift(),u=this._methods[o];if(u==null
){this.$logError("Bad action");return}if(u!=i.length){this.$logError("Bad number of parameters");return}i[u]={fn:this._executeCb,scope:this,args:t};var a=this[o]?this:this._robot[o]?this._robot:this._robot.robot;a[o].apply(a,i)}},ensureVisible:function(e,t){e=this._resolveHTMLElement(e),aria.utils.Dom.scrollIntoView(e),this.$callback(t)},focus:function(e,t){e=this._resolveHTMLElement(e),e.focus(),this.$callback(t)},pause:function(e,t){aria.core.Timer.addCallback({fn:this.$callback,scope:this,args:t,delay:e})
},click:function(e,t){e=this._resolvePosition(e);if(e==null)return;this.execute([["mouseMove",e],["mousePress",this._robot.BUTTON1_MASK],["pause",100],["mouseRelease",this._robot.BUTTON1_MASK]],t)},type:function(e,t,n){var r=[];e&&(e=this._resolveHTMLElement(e),r.push(["focus",e]));var i=t.match(/(\[[^\]]+\])|([^\[])/g);for(var s=0,o=i.length;s<o;s++){var u=i[s],a=!1,f=!0,l=!0;if(u.length>1){u=u.substr(1,u.length-2).toUpperCase(),/^<.*>$/.test(u)?l=!1:/^>.*<$/.test(u)&&(f=!1);if(!f||!l)u=u.substr(1,u.length-2
);u=u.replace(/-/g,"_")}else a=u!=u.toLowerCase(),u=u.toUpperCase();var c=this._keys[u];c!=null&&(u=c),u=this._robot.robot.KEYS["VK_"+u];if(u==null){this.$logError("Unknown key: %1",[i[s]]);continue}a&&r.push(["keyPress",this._robot.robot.KEYS.VK_SHIFT]),f&&r.push(["keyPress",u]),l&&r.push(["keyRelease",u]),a&&r.push(["keyRelease",this._robot.robot.KEYS.VK_SHIFT])}this.execute(r,n)},move:function(e,t,n){var r=e.duration||2e3,i=e.to;i=this._resolvePosition(i),t=t?this._resolvePosition(t):i;if(t==null||i==null
)return;this._robot.robot.smoothMouseMove(t,i,r,n)},drag:function(e,t,n){var r=e.to;r=this._resolvePosition(r),t=t?this._resolvePosition(t):r;if(t==null||r==null)return;var i=[["mouseMove",t],["mousePress",this._robot.BUTTON1_MASK],["move",e,t],["mouseRelease",this._robot.BUTTON1_MASK]];this.execute(i,n)},_resolvePosition:function(e){var t=aria.utils.Dom,n;aria.utils.Type.isString(e)&&(e=this._resolveHTMLElement(e));if(aria.utils.Type.isHTMLElement(e)){var r=t.getGeometry(e);n={x:r.x+r.width/2,y:r.y+r.height/2
}}else{if(!e.hasOwnProperty("x")||!e.hasOwnProperty("y"))return this.$logError("Invalid position."),null;n=e}return n},_resolveGeometry:function(e){var t=aria.utils.Dom,n;aria.utils.Type.isString(e)&&(e=this._resolveHTMLElement(e));if(aria.utils.Type.isHTMLElement(e))n=t.getGeometry(e);else{if(!(e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("width")&&e.hasOwnProperty("height")))return this.$logError("Invalid position."),null;n=e}return n},_resolveHTMLElement:function(e){var t;if(aria.utils.Type
.isString(e)){t=aria.utils.Dom.getElementById(e);if(t==null)return this.$logError("HTML element was not found."),null}else{if(!aria.utils.Type.isHTMLElement(e))return this.$logError("Invalid HTML element."),null;t=e}return t}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TemplateTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TemplateTestCase",$extends:"aria.jsunit.TestCase",$constructor:function(){this.$TestCase.constructor.call(this),this.env={template:this.$classpath+"Tpl",moduleCtrl:null,data:{}},this.templateCtxt=null,this.testDiv=aria.utils.Dom.getElementById(this.TEMPLATE_DIV),this._started=!1},$statics:{TEMPLATE_DIV:"TESTAREA"},$destructor:function(){this.testDiv.style.height="0",this.testDiv=null,this.templateCtxt=null,this.__cleanEnv(!0),this.$TestCase.$destructor.call(this)
},$dependencies:["aria.utils.SynEvents","aria.templates.RefreshManager"],$onload:function(){this.synEvent=aria.utils.SynEvents},$onunload:function(){this.synEvent=null},$prototype:{needVisibleDocument:!0,setTestEnv:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.env[t]=e[t])},testAsyncStartTemplateTest:function(){this.testDiv.style.height="1000px",Aria.$window.scroll(0,0),this._loadTestTemplate({fn:this._startTests,scope:this})},_startTests:function(){this._started=!0,this.runTemplateTest()},_loadTestTemplate
:function(e){Aria.loadTemplate({classpath:this.env.template,div:this.TEMPLATE_DIV,data:this.env.data,moduleCtrl:this.env.moduleCtrl,provideContext:!0},{fn:this._templateLoadCB,scope:this,args:{cb:e}})},_disposeTestTemplate:function(){Aria.disposeTemplate(this.TEMPLATE_DIV),this.templateCtxt=null,this._started=!1},_replaceTestTemplate:function(e,t){aria.core.Timer.addCallback({fn:function(){this._disposeTestTemplate(),this.__cleanEnv(),this.setTestEnv(e),this._loadTestTemplate(t)},scope:this})},_refreshTestTemplate
:function(){this.templateCtxt.$refresh()},_templateLoadCB:function(e,t){this.templateCtxt=e.tplCtxt;var n=t.cb;if(!e.success){this.$callback(n);return}this.templateCtxt.isReady()?this.$callback(n):this.templateCtxt.$onOnce({Ready:{fn:function(e,t){if(this._started)return;t&&(t.delay=50,aria.core.Timer.addCallback({fn:function(e){this.$callback(e)},scope:this,args:t}))},scope:this,args:n}})},runTemplateTest:function(){},waitForIframe:function(e,t,n){var r=aria.utils.Dom.getElementById(e);this.waitFor({condition
:function(){return Aria.$window.iframeLoaded&&r.contentWindow.aria!=null&&r.contentWindow.aria.templates!=null&&r.contentWindow.aria.templates.RefreshManager!=null&&this.getWidgetInstanceInIframe(r,t)!=null},callback:{fn:n,scope:this}})},nextTest:function(){var e=this._testsToExecute.shift();e?this[e]():this.notifyTemplateTestEnd()},notifyTemplateTestEnd:function(){aria.core.Timer.addCallback({fn:function(){this._disposeTestTemplate();try{this.testDiv.style.height="0",this.notifyTestEnd("testAsyncStartTemplateTest"
)}catch(e){this.handleAsyncTestError(e)}},scope:this,delay:50})},getElementById:function(e,t,n,r){var i=r||aria.utils.Dom,s=n||this.templateCtxt,o=s.$getId(e),u=i.getElementById(o);if(t&&!u){var a=[];this.__retrieveDirectSubTemplates(s,a);var f=s._mainSection._content;for(var l=0,c=a.length;l<c;l++){u=this.getElementById(e,!0,a[l],i);if(u)return u}}return u},getElementsByClassName:function(e,t){if(e.getElementsByClassName)return e.getElementsByClassName(t);var n=e.getElementsByTagName("*"),r=[],i=new RegExp("\\b"+
t+"\\b");for(var s=0,o=n.length;s<o;s++){var u=n[s];i.test(u.className)&&r.push(u)}return r},__retrieveDirectSubTemplates:function(e,t){var n=e.$TemplateCtxt?e._mainSection:e,r=n._content;for(var i=0,s=r.length;i<s;i++)r[i].behavior&&r[i].behavior.subTplCtxt?t.push(r[i].behavior.subTplCtxt):r[i]._content&&this.__retrieveDirectSubTemplates(r[i],t)},getInputField:function(e){var t=this.getWidgetInstance(e);return t.getTextInputField?t.getTextInputField():t.getDom()?t.getDom().getElementsByTagName("input")[0]:null
},getWidgetDomElement:function(e,t){var n=this.getWidgetInstance(e),r=n.getDom().getElementsByTagName(t)[0];return r},getExpandButton:function(e){var t=this.getWidgetInstance(e);return t.getDom(),t._frame.getIcon?t._frame.getIcon("dropdown"):null},getMultiSelectIcon:function(e){return this.getExpandButton(e)},getWidgetDropDownPopup:function(e){var t=this.getWidgetInstance(e);if(t._dropdownPopup)return t._dropdownPopup.domElement},getSortIndicator:function(e){var t=this.getWidgetInstance(e);return t.getDom(),
t?t._domElt:null},getWidgetInstance:function(e){var t=aria.templates.RefreshManager;return this.getWidgetInstanceInRefreshMgr(t,e)},getWidgetInstanceInRefreshMgr:function(e,t){e.updateHierarchies();var n=e.getHierarchies();for(var r=0;r<n.length;r++){var i=this._findInHierarchy(n[r],t);if(i)return i}},getWidgetInstanceInIframe:function(e,t){return this.getWidgetInstanceInRefreshMgr(e.contentWindow.aria.templates.RefreshManager,t)},getLink:function(e){return this.getWidgetDomElement(e,"a")},_findInHierarchy:function(
e,t,n){var r=!1;e.type=="template"?(n=e.elem,r=!0):e.type=="templateWidget"&&(e.elem.behavior?n=e.elem.behavior.subTplCtxt:n=e.elem.subTplCtxt,r=!0);if(r){var i=n.getBehaviorById(t);if(i)return i}if(e.content)for(var s=0;s<e.content.length;s++){var o=e.content[s],i=this._findInHierarchy(o,t,n);if(i!=null)return i}return null},assertTrue:function(e,t){try{this.$TestCase.assertTrue.apply(this,[e,t])}catch(n){this.handleAsyncTestError(n,!1)}},end:function(){this.notifyTemplateTestEnd()},clickAndType:function(e,
t,n,r){this.synEvent.click(this.getInputField(e),{fn:this.__afterClick,scope:this,args:[e,t,n,r]})},__afterClick:function(){var e=arguments[1][0],t=arguments[1][1],n=arguments[1][2],r=arguments[1][3];this.synEvent.type(this.getInputField(e),t,{fn:this.__afterType,scope:this,args:[e,t,n,r]})},__afterType:function(){var e=arguments[1][0],t=arguments[1][1],n=arguments[1][2],r=arguments[1][3];if(r===!1)this.$callback(n);else{var i=this.getInputField(e);i.blur(),this.synEvent.click(Aria.$window.document.body,n)}}
,__cleanEnv:function(e){var t=Aria.getClassRef(this.env.template);t&&t.classDefinition.$hasScript&&aria.core.ClassMgr.unloadClass(this.env.template+"Script"),aria.core.ClassMgr.unloadClass(this.env.template),e&&this.env.moduleCtrl&&this.env.moduleCtrl.classpath&&aria.core.ClassMgr.unloadClass(this.env.moduleCtrl.classpath)},computeZIndex:function(e){var t=Aria.$window.document.body;while(e&&e!=t){var n=e.style,r=n.zIndex;if(r){var i=parseInt(r,10);return i}e=e.parentNode}return null}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TemplateUITestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TemplateUITestCase",$extends:"aria.jsunit.TemplateTestCase",$constructor:function(){this.$TemplateTestCase.constructor.call(this),this.screenCapture=aria.jsunit.ScreenCapture},$dependencies:["aria.jsunit.ScreenCapture"],$prototype:{capture:function(e,t){var n=this.screenCapture.capture({useCaseName:e,conf:{x:t.x?t.x:0,y:t.y?t.y:0,width:t.width?t.width:800,height:t.height?t.height:200,threshold:0},oncomplete:this._onCaptureDone,scope:this,args:{cb:t.fn,scope:t.scope
}});n||t.fn.call(t.scope)},_onCaptureDone:function(e){var t=this.screenCapture.getResponse().code;this.assertTrue("0"===t,"Images are different"),e.cb.call(e.scope)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/Test.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.Test",$events:{failure:{description:"",properties:{testClass:"{String} classpath of the current test",testState:"{String} name of the current state in the test (method name)",description:"{String} failure description"}},error:{description:"",properties:{testClass:"{String} classpath of the current test",testState:"{String} name of the current state in the test (method name)",exception:"{Error} error object caught by the test",msg:"{String} optional message associated to this error"
}},stateChange:{description:"",properties:{testClass:"{String} classpath of the current test",testState:"{String} name of the current state in the test (method name)"}},start:{description:"",properties:{testObject:"{Object) the test object",testClass:"{String} classpath of the current test"}},end:{description:"",properties:{testObject:"{Object) the test object",testClass:"{String} classpath of the current test",nbrOfAsserts:"{Integer} number of asserts evaluated during the test"}},testLoad:{description:"",properties
:{testLoader:"{Object) the test object that loads the sub-test",testObject:"{Object) the test object which has been loaded"}},preloadEnd:{description:"",properties:{testSuite:"{Object) the test object that loads the sub-test"}}},$constructor:function(){this._isFinished=!1,this._parentTest=null,this._executionTime=-1,this._errors=[],this._failedOnCreate=!1,this.$JsObject.constructor.call(this)},$destructor:function(){this._parentTest=null;if(!this._failedOnCreate){var e=Aria.getClassRef(this.$classpath);aria.
core.ClassMgr.unloadClass(this.$classpath);if(e&&e.classDefinition&&e.classDefinition.$dependencies){var t=e.classDefinition.$dependencies;for(var n=0,r=t.length;n<r;n+=1)t[n].substring(0,5)=="test."&&aria.core.ClassMgr.unloadClass(t[n])}}this.$JsObject.$destructor.call(this)},$prototype:{run:function(){},_startTest:function(){this._timestampBegin=(new Date).getTime()},_endTest:function(){this._timestampEnd=(new Date).getTime(),this._executionTime=this._timestampEnd-this._timestampBegin},getExecutionTime:function(
){return this._executionTime},setParentTest:function(e){this._parentTest=e},getParentTest:function(){return this._parentTest},isFinished:function(){return this._isFinished===!0},getFinishedTestsCount:function(){return this._testPassed},init:function(){this.$raiseEvent({name:"preloadEnd",testSuite:this})}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestacularReport.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestacularReport",$dependencies:["aria.utils.Json"],$singleton:!0,$constructor:function(){var e=Aria.$frameworkWindow,t;e.parent!==e&&(t=e.parent.testacular),this._testacular=t,t==null&&(this.attachTest=Aria.empty),this._testEngine=null},$dispose:function(){this._testEngine&&this.detachTestEngine(this._testEngine),this._testacular=null},$statics:{SEVERAL_TEST_ENGINES:"Attaching several test engines to the TestacularReport is not supported."},$prototype:{isTestacularEnabled
:function(){return this._testacular!=null},_onChange:function(e){var t=e.changeType,n=this._testEngine,r=this._testacular,i=n.getCurrentTest(),s=null;e.changeType=="failure"?s=i.failures:e.changeType=="error"&&(s=i.errors),s&&this._testacular.error({type:t,testClass:i.testClass,details:s[s.length-1]});var o=n.isFinished();if(o){var u=this.createFinalReport(e.testReport);this._testacular.updateResult(u);var a=u.totalNbrOfErrors===0&&u.totalNbrOfFailures===0;this._testacular.complete(a)}else{var f=this.createStatusReport
(e.testReport,i);this._testacular.updateStatus(f)}},attachTestEngine:function(e){if(this._testacular){if(e===this._testEngine)return;this._testEngine&&(this.$logError(this.SEVERAL_TEST_ENGINES),this.detachTestEngine(this._testEngine)),this._testEngine=e,e.$on({change:this._onChange,scope:this})}},detachTestEngine:function(e){this._testEngine==e&&(e.$unregisterListeners(this),this._testEngine=null)},createStatusReport:function(e,t){return{totalNbrOfAsserts:e.totalNbrOfAsserts,totalNbrOfErrors:e.totalNbrOfErrors
,totalNbrOfFailures:e.totalNbrOfFailures,currentTest:{testClass:t.testClass,state:t.state,processingState:t.processingState}}},createFinalReport:function(e){var t=aria.utils.Json.copy(e,!1);t.executionTime=t.instance.getExecutionTime(),delete t.instance,delete t.state,delete t.processingState,t.errors||delete t.errors,t.failures||delete t.failures,delete t.retryURL;var n=t.subTests;if(n){var r=[];for(var i=0,s=n.length;i<s;i++)r[i]=this.createFinalReport(n[i]);t.subTests=r}else delete t.subTests;return t}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestCase",$extends:"aria.jsunit.Assert",$dependencies:["aria.core.Sequencer","aria.utils.Json","aria.utils.Type","aria.utils.Object","aria.utils.Array"],$statics:{defaultTestTimeout:6e4,ERROR_NOTIFY_END:"Synchronous test is calling notifyTestEnd",EXCEPTION_IN_METHOD:"Exception raised while calling '%1' in an asynchronous test"},$constructor:function(){this.$Assert.constructor.call(this),this._sequencer=null,this._currentTaskId=-1,this.skipTest=!1,this._testsCount=0
,this._testPassed=0,this.__appEnv={};var e=Aria.nspace(this.$classpath).classDefinition.$prototype,t=aria.utils.Object.keys(e),n=aria.utils.Type.isFunction;t=aria.utils.Array.filter(t,function(t){return n(e[t])&&!aria.utils.Array.contains(["setUp","tearDown"],t)}),this.__wrapTestMethods(t)},$destructor:function(){this._sequencer&&this._sequencer.$dispose(),this.$Assert.$destructor.call(this),this._currentTaskId=null},$prototype:{run:function(){this._saveAppEnvironment(),this._startTest(),this._sequencer=new 
aria.core.Sequencer;var e=aria.utils.Type.isFunction;if(!this.skipTest)for(var t in this)if(t.indexOf("test")===0&&e(this[t])){var n=t.indexOf("testAsync")===0;this._sequencer.addTask({name:t,fn:this._execTestTask,scope:this,asynchronous:n}),this._testsCount++}this._sequencer.$on({end:this._onSequencerEnd,scope:this}),this._sequencer.start()},__wrapTestMethods:function(e){var t={};for(var n=0,r=e.length;n<r;n+=1){var i=e[n];if(i.indexOf("test")===0)continue;t[i]=this[i],this[i]=function(e){return function(){
var n=this._currentTestName;if(!n||n.indexOf("testAsyn")!==0)return t[e].apply(this,arguments);try{return t[e].apply(this,arguments)}catch(r){this.__failInTestMethod(r,e)}}}(i)}},__failInTestMethod:function(e,t){var n=this._currentTestName;n.indexOf("testAsyn")===0&&(this.$logError(this.EXCEPTION_IN_METHOD,t,e),this.notifyTestEnd(n.substring(0,n.length-2)))},waitFor:function(e){var t=e.delay||250,n=e.condition,r=function(){this.$callback(n)?this.$callback(e.callback):aria.core.Timer.addCallback({fn:r,scope:this
,delay:t})};aria.core.Timer.addCallback({fn:r,scope:this,delay:t})},_execTestTask:function(e){var t=e.name,n;this._updateAssertInfo(t+"()");var r=!1;try{this._currentTaskId=e.id,this.setUp&&this.setUp(),e.asynchronous?this.setTestTimeout(this.defaultTestTimeout,t):n=this._disableTestEnd();try{this[t].call(this)}catch(i){i.name!=this.ASSERT_FAILURE&&this.raiseError(i),r=!0}}catch(s){this.raiseError(s,"Error location: setUp() method"),r=!0}if(!e.asynchronous||r)this._enableTestEnd(n),this.notifyTestEnd(t,r,e.asynchronous
)},_disableTestEnd:function(){var e=this.notifyTestEnd;return this.notifyTestEnd=this._failOnNotify,e},_enableTestEnd:function(e){e&&(this.notifyTestEnd=e)},_failOnNotify:function(){this.$logError(this.ERROR_NOTIFY_END)},setTestTimeout:function(e,t){this._timeoutTimer&&aria.core.Timer.cancelCallback(this._timeoutTimer);var n=new Error("Assert "+t+" has timed out");this._timeoutTimer=aria.core.Timer.addCallback({fn:this.handleAsyncTestError,scope:this,delay:e,args:n})},notifyTestEnd:function(e,t,n){this._timeoutTimer&&
(aria.core.Timer.cancelCallback(this._timeoutTimer),this._timeoutTimer=null),this.checkExpectedEventListEnd(),this.assertLogsEmpty(!1,!1),this.clearLogs();try{this.tearDown&&this.tearDown()}catch(r){this.raiseError(r,"Error location: tearDown() method")}this._restoreAppEnvironment();var i=Aria.__undisposedObjects;for(var s in i)i.hasOwnProperty(s)&&i[s]["aria:createdFromTest"]==null&&(i[s]["aria:createdFromTest"]=this.$classpath+"."+this._currentTestName);aria.core.Timer.callbacksRemaining(),n!==!1&&this._sequencer&&
this._sequencer.notifyTaskEnd(this._currentTaskId)},callAsyncMethod:function(e,t,n,r){var i={cb:r,testName:this._currentTestName};e[t]==null&&this.raiseError(new Error("Object "+e+"has no method called '"+t+"'")),aria.utils.Type.isFunction(e[t])||this.raiseError(new Error("Method '"+t+"' in "+e+" is not a Function"));try{n.push({fn:"_callAsyncMethodCb",scope:this,args:i}),e[t].apply(e,n)}catch(s){this.handleAsyncTestError(s,!1),this.notifyTestEnd(this._currentTestName)}},_callAsyncMethodCb:function(e,t){try{
this.$callback(t.cb,e)}catch(n){this.handleAsyncTestError(n,!1)}this.notifyTestEnd(t.testName)},_onSequencerEnd:function(e){this._sequencer&&(this._sequencer.$dispose(),this._sequencer=null),this._testPassed++,this._endTest(),this._currentTaskId=-1},handleAsyncTestError:function(e,t){e.name!=this.ASSERT_FAILURE&&this.raiseError(e),t!==!1&&this.notifyTestEnd(this._currentTestName)},_saveAppEnvironment:function(){this.__appEnv=aria.utils.Json.copy(aria.core.AppEnvironment.applicationSettings)},_restoreAppEnvironment
:function(){aria.core.AppEnvironment.setEnvironment(aria.utils.Json.copy(this.__appEnv))}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestCommunicator.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestCommunicator",$constructor:function(e){this.id=e.id,this.content="",this.init(e)},$destructor:function(){},$prototype:{init:function(e){var t=Aria.$window.document,n=t.createElement("div");n.style.cssText=["display:block","visibility:visible","height:1px","width:1px","overflow:hidden"].join(";"),n.id=this.id,t.body.appendChild(n);var r=e.content;this.content=r,n.appendChild(t.createTextNode(r))}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestEngine.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestEngine",$dependencies:["aria.utils.Type"],$events:{change:{description:"",properties:{testReport:"{Object} the test report object",changeType:"{Enum} error | failure | testStart | testEnd | testProcessingState"}}},$constructor:function(){this.testReport=null,this._testStack=[],this._currentTest=null,this._isFinished=!1,this.runIsolated=!1},$destructor:function(){this.testReport=null},$prototype:{runTest:function(e,t){this.skipTests=t,this._registerAsListener(
e),e.run()},_onFailure:function(e){this._currentTest.failures==null&&(this._currentTest.failures=[]),this._currentTest.failures.push({testState:e.testState,description:e.description});var t=this._testStack.length;for(var n=0;t>n;n++)this._testStack[n].totalNbrOfFailures++;this._raiseChange("failure")},_onError:function(e){this._currentTest.errors==null&&(this._currentTest.errors=[]),this._currentTest.errors.push({testState:e.testState,description:e.msg,exception:e.exception});var t=this._testStack.length;for(
var n=0;t>n;n++)this._testStack[n].totalNbrOfErrors++;this._raiseChange("error")},_onTestLoad:function(e){var t=e.testObject,n=t.$classpath;this.skipTests!=null&&aria.utils.Array.contains(this.skipTests,t.$classpath)&&(t.skipTest=!0);do{var r=Aria.nspace(n).classDefinition;if(!r)break;aria.utils.Array.contains(this.skipTests,r.$extends)&&(t.skipTest=!0),n=r.$extends}while(n);this._registerAsListener(t)},_onTestStart:function(e){var t={testClass:e.testObject.$classpath,instance:e.testObject,totalNbrOfFailures
:e.testObject._failedOnCreate?1:0,totalNbrOfErrors:0,totalNbrOfAsserts:0,state:"processing",processingState:"",subTests:null,failures:null,errors:null,retryURL:this._getRetryTestUrl(e.testObject.$classpath)},n=this._testStack.length;if(n===0)this._testStack.push(t),this.testReport=t;else{var r=this._testStack[n-1];r.subTests==null&&(r.subTests=[]),r.subTests.push(t),this._testStack.push(t)}this._currentTest=t,this._raiseChange("testStart")},_onTestEnd:function(e){e.testObject.$unregisterListeners(this),this.
_currentTest.processingState="",e.testObject.skipTest?this._currentTest.state="skipped":this._currentTest.state="done",e.nbrOfAsserts&&(this._currentTest.totalNbrOfAsserts+=e.nbrOfAsserts),this._testStack.pop();var t=this._testStack.length;t>0?this._currentTest=this._testStack[t-1]:(this._currentTest=null,this._isFinished=!0),this._raiseChange("testEnd")},isFinished:function(){return this._isFinished===!0},_onStateChange:function(e){this._currentTest.processingState=e.testState,this._raiseChange("testProcessingState"
)},_registerAsListener:function(e){this.runIsolated&&aria.utils.Type.isInstanceOf(e,"aria.jsunit.TestSuite")&&(e.runIsolated=!0),e.$on({failure:this._onFailure,error:this._onError,start:this._onTestStart,end:this._onTestEnd,stateChange:this._onStateChange,testLoad:this._onTestLoad,scope:this})},_raiseChange:function(e){this.$raiseEvent({name:"change",testReport:this.testReport,changeType:e})},_getRetryTestUrl:function(e){var t=aria.utils.QueryString;t.getKeyValue("testClasspath");var n=t.keyValues;n.testClasspath=
e;var r=[];for(var i in n){if(!n.hasOwnProperty(i)||i=="store")continue;r.push([i,n[i]].join("="))}var s="?"+r.join("&"),o=Aria.$frameworkWindow,u=o.location.href.replace(/#$/,"");return u=u.replace(o.location.search,""),u+=s,u},getCurrentTest:function(){return this._currentTest},pause:function(e){var t=this._currentTest.instance,n;t.$TestSuite?n=t:n=this._testStack[this._testStack.length-2].instance,!n||!n.$TestSuite?(this.$logError("Pause couldn't find a test suite to pause"),this.$callback(e)):n.pause(e)}
,resume:function(e){var t=this._currentTest.instance;t.resume(e)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestMsgHandler.js
//*******************
(function(){var e=0;Aria.classDefinition({$classpath:"aria.jsunit.TestMsgHandler",$extends:"aria.core.IOFilter",$dependencies:["aria.jsunit.ConnectionSession"],$constructor:function(t){this.$IOFilter.constructor.call(this),this._metaData=this.CONNECTION_SESSION_METADATA+e,e++,this.cxLogs=[],t.cxLogs=this.cxLogs},$destructor:function(){this.cxLogs=null,this.$IOFilter.$destructor.call(this)},$statics:{CONNECTION_SESSION_METADATA:"aria.jsunit.TestMsgHandler:connectionSession"},$prototype:{onRequest:function(e){
var t=e.sender;if(t&&t.classpath=="aria.modules.RequestMgr"){this.$assert(38,t[this._metaData]==null);var n=new aria.jsunit.ConnectionSession({ioRequest:e});t[this._metaData]=n,this.cxLogs.push(n)}},onResponse:function(e){var t=e.sender;if(t){var n=t[this._metaData];n&&n.setIOResponse()}}}})})();
//*******************
//LOGICAL-PATH:aria/jsunit/TestReport.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestReport",$singleton:!1,$dependencies:[],$constructor:function(e){this.testRunner=e.testRunner},$destructor:function(){this.testRunner=null},$prototype:{getReport:function(){var e=this.testRunner.getErrors(),t=(new Date).toLocaleString(),n=["Aria templates test campaign completed<br>",t,"<br>","<h2>Error report</h2>",this.getErrorSummary(),"<ul>"].join("<br>");for(var r=0,i=e.length;r<i;r++){var s=e[r],o=this.getErrorReport(s);n+=o}return n+="</ul><br>",n},getErrorSummary
:function(){var e=this.testRunner.getErrors(),t="";return e.length===0?t='<b><font color="green">No test failed !</font></b>':e.length===1?t="<b>1 test failed :</b>":t="<b>"+e.length+" tests failed :</b>",t},getErrorReport:function(e){var t=e.messages,n='<li><a href="'+e.retryURL+'">'+e.testClass+"</a>"+"</li>"+"<li> Error"+(t.length>1?"s":"")+" : "+"<ul>";for(var r=0,i=t.length;r<i;r++){var s=t[r];n+="<li>"+s+"</li>"}return n+="</ul></li><br>",n},getMailHeader:function(){var e='<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html><head><meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"><title>Aria Templates Tests</title><style>*{font-family: Tahoma,Arial,sans-serif;font-size:10pt;}h1{font-size:14pt;} h2{font-size:22pt;margin-bottom:0px;font-weight:lighter} ul{line-height:1.5em;list-style-type:none;margin:0.3em 0 0 1.5em;padding:0;}</style></head><body>'
;return e},getMailFooter:function(){return'<br><img src="http://ariatemplates.com/images/logo-page.png"/><br><b>Aria team</b></body></html>'}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestRunner.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestRunner",$singleton:!0,$dependencies:["aria.jsunit.TestEngine","aria.jsunit.TestReport","aria.jsunit.SonarReport","aria.utils.Dom"],$constructor:function(){this._testEngine=null,this._reporter=new aria.jsunit.TestReport({testRunner:this}),this._sonarReporter=new aria.jsunit.SonarReport({testRunner:this}),this._outputDiv=null},$destructor:function(){this._testEngine&&this._testEngine.$dispose(),this._reporter&&this._reporter.$dispose(),this._sonarReporter&&this
._sonarReporter.$dispose(),this._outputDiv=null},$prototype:{outputDivId:"_TestRunnerOutput_",getReporter:function(){return this._reporter},getSonarReporter:function(){return this._sonarReporter},run:function(e,t){var n=aria.utils.Dom.getElementById(this.outputDivId);if(n==null){var r=Aria.$window.document;n=r.createElement("div"),r.body.appendChild(n)}this._outputDiv=n;var i=this.getEngine();this._refreshDisplay(),this._rootTest=e,i.runTest(e,t)},_onChange:function(e){var t=e.changeType;(t=="testStart"||t=="testEnd"
)&&this._refreshDisplay()},_refreshDisplay:function(){var e=this._testEngine.testReport,t=['<div style="font-family:Arial;font-size:12px">','<span style="font-size:15px;font-weight:bold">Unit Test Report</span>',"<hr/>"];e==null?t.push("Test pending start..."):this._processOutput(e,t),t.push("</div>");var n=this._outputDiv;n.innerHTML="",n.innerHTML=t.join("")},_processOutput:function(e,t){var n="#000000",r="",i=e.instance;if(e.state=="done"&&e.totalNbrOfFailures===0&&e.totalNbrOfErrors===0)n="green",r=" - OK"
;else if(e.totalNbrOfFailures>0||e.totalNbrOfErrors>0){n="red";var s=[];if(e.totalNbrOfFailures>0){var o=e.totalNbrOfFailures>1?" failures":" failure";s.push(e.totalNbrOfFailures+o)}if(e.totalNbrOfErrors>0){var o=e.totalNbrOfErrors>1?" errors":" error";s.push(e.totalNbrOfErrors+o)}r=" - KO: "+s.join(",")}var u="",a="";if(e.state=="done"){u=" in "+i.getExecutionTime()+" ms";var o=e.totalNbrOfAsserts>1?"asserts":"assert";a=" ("+e.totalNbrOfAsserts+" "+o+")"}e.state=="skipped"&&(n="green",r=" - NOT TESTED");var f=
['<div style="color:',n,'">',"<b>",e.testClass,"</b> ",r," - ","<i>",e.state,u,a,"</i>",'<a href="',e.retryURL,'" target="_blank" style="color:blue"> retry</a>',"<br/>"];e.state==="processing"&&f.splice(-1,0,'<a href=javascript:interrupt("',e.testClass,'");> skip</a>'),t.push(f.join("")),this._processFailuresOrErrors(e,"failures",t),this._processFailuresOrErrors(e,"errors",t);if(e.subTests&&e.subTests.length>0){t.push('<div style="margin-left:20px">');var l=e.subTests.length;for(var c=0;l>c;c++)this._processOutput
(e.subTests[c],t);t.push("</div>")}f=["</div>"],t.push(f.join(""))},getFailures:function(){var e=[],t=aria.jsunit.TestRunner.getErrors();for(var n=0;n<t.length;n++)e.push(t[n].testClass);return e.join(",")},getErrors:function(){var e=[],t=this.getEngineReport();return function(t){var n=t.subTests;if(aria.utils.Type.isArray(n))for(var r=0,i=n.length;r<i;r++){var s=n[r];arguments.callee(s)}var o=[];aria.utils.Type.isArray(t.failures)&&(o=o.concat(t.failures)),aria.utils.Type.isArray(t.errors)&&(o=o.concat(t.errors
));if(o.length>0){var u=[];for(var r=0,i=o.length;r<i;r++){var a=o[r];u.push(a.testState+" : "+a.description)}e.push({retryURL:t.retryURL,messages:u,testClass:t.testClass})}}(t),e=e.sort(function(e,t){var n=e.testClass.toLowerCase(),r=t.testClass.toLowerCase();return n>r?1:n==r?0:-1}),e},getReport:function(){return this.getReporter().getReport()},getEngineReport:function(){var e=this._testEngine;return e.testReport},_processFailuresOrErrors:function(e,t,n){var r=t=="failures";if(e[t]&&e[t].length>0){n.push('<div style="margin-left:20px;color:#000000">'
);var i=e[t].length;for(var s=0;i>s;s++){var o=e[t][s];r?n.push("Failure #"+(s+1)):n.push("Error #"+(s+1)),n.push(": "),o.description?n.push(o.description):r?n.push("Failure"):n.push("Error"),n.push(" in <i>"+o.testState+"</i>"),n.push("<br/>")}n.push("</div>")}},_getTestCases:function(e){var t=[];if(!e.$TestSuite)return[{classpath:e.$classpath,instance:e}];if(e.isSkipped()||e.isSelected()==-1)return[];var n=e.getSubTests();for(var r=0,i=n.length;r<i;r++){var s=n[r];if(s.classpath.indexOf("TestSuite")!=-1){var o=
this._getTestCases(s.instance);t=t.concat(o)}else t.push(s)}return t},getTestCases:function(){return this._getTestCases(this._rootTest)},interrupt:function(e){var t=this._testEngine.getCurrentTest();if(e!==t.testClass||t.state!=="processing")return;var n=new Error("Test interrupted by the user");return t.instance.handleAsyncTestError(n,!0),!1},getEngine:function(){return this._testEngine==null&&(this._testEngine=new aria.jsunit.TestEngine,this._testEngine.$on({change:this._onChange,scope:this})),this._testEngine
}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestSuite.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestSuite",$extends:"aria.jsunit.Test",$dependencies:["aria.core.Sequencer","aria.jsunit.TestCase","aria.jsunit.TestWrapper","aria.utils.Type"],$constructor:function(){this.$Test.constructor.call(this),this._tests=[],this._subTests=[],this._sequencer=null,this._preloadSequencer=null,this._assertCount=0,this._isSelected=1,this.skipTest=!1,this.runIsolated=!1,this._isPaused=!1,this._pauseCallback=null,this._pausedTask-null},$destructor:function(){this._sequencer&&this
._sequencer.$dispose(),this._preloadSequencer&&this._preloadSequencer.$dispose(),this._disposeRunningTest(),this.$Test.$destructor.call(this)},$prototype:{refreshSubTests:function(){var e=this._tests,t=[];for(var n=0,r=e.length;n<r;n++){var i=e[n];t.push({classpath:i,instance:null,lastInSuite:n===r-1})}this._subTests=t},getSubTests:function(){return this._subTests.length===0&&this.refreshSubTests(),this._subTests},getSubTestSuites:function(){var e=[],t=this.getSubTests();for(var n=0,r=t.length;n<r;n++){var i=
t[n],s=i.classpath;s.indexOf("TestSuite")!=-1&&e.push(i)}return e},getAllSubTestCases:function(){var e=[],t=this.getSubTests();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i.classpath.indexOf("TestSuite")!=-1){var s=i.instance.getAllSubTestCases();e=e.concat(s)}else e.push(i)}return e},getAllSubTestSuites:function(){var e=[],t=this.getSubTests();for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i.classpath.indexOf("TestSuite")!=-1){e.push(i);var s=i.instance.getAllSubTestSuites();e=e.concat(s)}}return e},preload
:function(){var e=this.getSubTestSuites();if(e.length===0)return this.$raiseEvent("preloadEnd");this._preloadSequencer=new aria.core.Sequencer;for(var t=0,n=e.length;t<n;t++){var r=e[t];this._preloadSequencer.addTask({name:"preload_"+t,fn:this.__preloadSubSuiteTask,scope:this,args:{suite:r},asynchronous:!0})}this._preloadSequencer.$on({end:this.__onPreloadSequenceEnd,scope:this}),this._preloadSequencer.start()},__onPreloadSequenceEnd:function(){this.$raiseEvent("preloadEnd")},__preloadSubSuiteTask:function(e
,t){var n=t.suite,r=n.classpath;Aria.load({classes:[r],oncomplete:{fn:this.__onLoadSubSuiteCompleted,scope:this,args:{task:e,suite:n}},onerror:{fn:this.__onDownloadTaskError,scope:this,args:{sequencer:this._preloadSequencer,task:e,test:n}}})},__onLoadSubSuiteCompleted:function(e){var t=e.task,n=e.suite;n.instance=Aria.getClassInstance(n.classpath),n.instance.setParentTest(this),n.instance.$on({preloadEnd:{fn:function(){this._preloadSequencer.notifyTaskEnd(t.id)},scope:this}}),n.instance.preload()},addTests:function(
){var e=arguments;for(var t=0,n=e.length;t<n;t++){var r=e[t];aria.utils.Type.isString(r)&&this._tests.push(r)}},getFinishedTestsCount:function(){var e=this._suitesInstances,t=this._testPassed;for(var n in e){if(!e.hasOwnProperty(n))continue;var r=e[n];t+=r.getFinishedTestsCount()}return t},run:function(){this._startTest(),this._sequencer=new aria.core.Sequencer,this._assertCount=0;var e=this.getSubTests();if(!this.isSkipped()&&this.isSelected()!==-1)for(var t=0,n=e.length;t<n;t++){var r=e[t];this._sequencer.
addTask({name:"Test_"+t,fn:this.__runTestTask,scope:this,args:{test:r},asynchronous:!0})}this._sequencer.$on({end:this._onSequencerEnd,scope:this}),this.$raiseEvent({name:"start",testObject:this,testClass:this.$classpath}),this._sequencer.start()},isSkipped:function(){return this.skipTest===!0},__runTestTask:function(e,t){var n=t.test,r=n.classpath;Aria.load({classes:[r],oncomplete:{fn:this._execTestTask,scope:this,args:{task:e,test:n}},onerror:{fn:this.__onDownloadTaskError,scope:this,args:{sequencer:this._sequencer
,task:e,test:n}}})},__onDownloadTaskError:function(e){var t=e.task,n=e.test,r=e.sequencer,i="Loading of "+n.classpath+" failed",s=this.__getLastRuntimeError();s&&(i=s),this.$raiseEvent({name:"failure",testState:this.$classpath,description:i}),n.instance=this.__createFailedTest("$fileLoad",i,n.classpath),this._execTestTask(e)},_execTestTask:function(e){var t=e.task,n=e.test;n.instance||(n.instance=this._createTest(n.classpath)),this.__runningTest=n.instance,this.$raiseEvent({name:"testLoad",testLoader:this,testObject
:n.instance}),n.instance.$on({end:{fn:this._onTestEnd,scope:this,args:{taskId:t.id,taskMgr:t.taskMgr}},stateChange:{fn:this._raiseStateChange,scope:this}}),n.instance.run()},_onTestEnd:function(e,t){e.nbrOfAsserts&&(this._assertCount+=e.nbrOfAsserts),this._raiseStateChange(),e.src.$unregisterListeners(this),this._disposeRunningTest();if(!this._isPaused)t.taskMgr.notifyTaskEnd(t.taskId);else{this._pausedTask=t;if(this._pauseCallback){var n=this._pauseCallback;this._pauseCallback=null,this.$callback(n)}}},_createTest
:function(e){var t;try{var n=Aria.getClassRef(e);this.runIsolated&&!aria.utils.Type.isInstanceOf(n.prototype,"aria.jsunit.TestSuite")?t=new aria.jsunit.TestWrapper(e):t=new n,t.setParentTest(this)}catch(r){var i="Uncaught exception while creating "+e+"\n"+"Message : "+r.message,s=this.__getLastRuntimeError();s&&(i=s),t=this.__createFailedTest("$constructor",i,e)}return t},__getLastRuntimeError:function(){var e="";if(Aria.__runtimeErrors){var t=Aria.__runtimeErrors[Aria.__runtimeErrors.length-1];e=t}return e}
,__createFailedTest:function(e,t,n){var r=new aria.jsunit.TestCase;return r._errors=[{type:"failure",testMethod:e,description:t}],r._failedOnCreate=!0,r.$classpath=n,r},_disposeRunningTest:function(){try{this.__runningTest&&(this.__runningTest.$dispose(),this.__runningTest.$TestCase&&this.__runningTest.assertLogsEmpty())}catch(e){var t=this.__runningTest.$classpath;this.__runningTest._errors.push({type:"failure",testMethod:"$destructor",description:"Uncaught exception while destroying "+t+"\nMessage : "+e.message
}),this.$raiseEvent({name:"failure",testState:t,description:"Uncaught exception while destroying "+t+"\nMessage : "+e.message})}aria.core.Log.clearAppenders(),aria.core.Log.resetLoggingLevels(),this.__runningTest=null},_raiseStateChange:function(){this.$raiseEvent({name:"stateChange"})},isSelected:function(){return this._isSelected},setSelected:function(e){if(this._isSelected===1)return;this._isSelected=1;var t=this.getParentTest();t&&e!==!1&&t.checkSelected();var n=this.getSubTestSuites();for(var r=0,i=n.length
;r<i;r++){var s=n[r];s.instance.setSelected(!1)}},setUnselected:function(e){if(this._isSelected===-1)return;this._isSelected=-1;var t=this.getParentTest();t&&e!==!1&&t.checkSelected();var n=this.getSubTestSuites();for(var r=0,i=n.length;r<i;r++){var s=n[r];s.instance.setUnselected(!1)}},checkSelected:function(){var e=!1,t=!1,n=this.getSubTestSuites();for(var r=0,i=n.length;r<i;r++){var s=n[r];s.instance.isSelected()==1?e=!0:s.instance.isSelected()==-1?t=!0:(e=!0,t=!0)}if(e&&!t)this.setSelected();else if(!e&&
t&&this.getSubTests().length==n.length)this.setUnselected();else{this._isSelected=0;var o=this.getParentTest();o&&o.checkSelected()}},_onSequencerEnd:function(e){this._sequencer&&(this._sequencer.$dispose(),this._sequencer=null),this._endTest(),this._isFinished=!0,this.$raiseEvent({name:"end",testObject:this,testClass:this.$classpath,nbrOfAsserts:this._assertCount})},pause:function(e){this._isPaused=!0,this._pauseCallback=e},resume:function(e){this._isPaused=!1,this.$callback(e);if(this._pausedTask){var t=this
._pausedTask;this._pausedTask=null,t.taskMgr.notifyTaskEnd(t.taskId)}}}});
//*******************
//LOGICAL-PATH:aria/jsunit/TestWrapper.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.TestWrapper",$extends:"aria.jsunit.Assert",$dependencies:["aria.utils.FrameATLoader"],$constructor:function(e){this.$Assert.constructor.call(this),this.$classpath=e},$destructor:function(){this._removeFrame(),this.$Assert.$destructor.call(this)},$prototype:{run:function(){this._startTest();var e=Aria.$window.document;this._frame=e.createElement("iframe"),this._frame.style.cssText="z-index:100000;position:absolute;left:0px;top:0px;width:1024px;height:768px;border:1px solid black;visibility:hidden;display:block;background-color:white;"
,e.body.appendChild(this._frame),this._subWindow=this._frame.contentWindow,aria.utils.FrameATLoader.loadAriaTemplatesInFrame(this._frame,{fn:this._atLoadedInFrame,scope:this})},_atLoadedInFrame:function(e){if(!e.success){this.raiseFailure("An error occurred while loading the framework in the iframe."),this._end();return}var t=this._subWindow,n=t.Aria,r=t.document,i=r.createElement("div");i.setAttribute("id","TESTAREA"),r.body.appendChild(i);var s=Aria.getClassRef(this.$classpath);s.prototype.needVisibleDocument&&
(this._frame.style.visibility="visible"),n.load({classes:[this.$classpath],oncomplete:{fn:this._loadTestComplete,scope:this},onerror:{fn:this._loadTestError,scope:this}})},_loadTestError:function(){this.raiseFailure("An error occurred while loading the test class."),this._end()},_loadTestComplete:function(){var e=this._subWindow.Aria,t=this._subWindow.aria;this._testInstance=e.getClassInstance(this.$classpath),this._testInstance.$on({"*":this._testEvent,scope:this}),this._testInstance.run()},handleAsyncTestError
:function(e){this.raiseFailure("Test was interrupted."),this._end()},_testEvent:function(e){e.name=="error"?this.raiseError(e.exception,e.msg):e.name=="failure"?this.raiseFailure(e.description):e.name=="stateChange"?this._updateAssertInfo(e.testState):e.name!="start"&&e.name=="end"&&(this._totalAssertCount=e.nbrOfAsserts,this._testsCount=this._testInstance._testsCount,aria.core.Timer.addCallback({fn:this._end,scope:this,delay:100}))},_removeFrame:function(){if(this._frame){if(this._subWindow.Aria&&this._subWindow
.Aria.eval){var e=this._subWindow.Aria.eval("(function () { try { if (this._testInstance) {this._testInstance.$dispose();} return Aria.dispose(); } catch (e) { return { error: e }; }}).call(arguments[2])",null,this);this._testInstance=null;if(e)if(e.error)this.raiseError(e.error,"An exception occurred while disposing the test or the framework.");else if(e.nbNotDisposed!==0){var t=e.notDisposed,n=["There were ",e.nbNotDisposed," undisposed objects ("],r=!0;for(var i in t)t.hasOwnProperty(i)&&(r?r=!1:n.push(", "
),n.push(t[i].$classpath));n.push(")"),this.raiseFailure(n.join(""))}}var s=Aria.$window.document.body;s.removeChild(this._frame),this._subWindow=null,this._frame=null}},_end:function(){this._removeFrame(),this._endTest()}}});
//*******************
//LOGICAL-PATH:aria/jsunit/UITestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.UITestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.ScreenCapture"],$constructor:function(){this.$TestCase.constructor.call(this),this.screenCapture=aria.jsunit.ScreenCapture},$destructor:function(){this.$TestCase.$destructor.call(this),this.screenCapture=null},$prototype:{runUITest:function(e){var t=e.scope?e.scope:this,n=this.screenCapture.capture({useCaseName:e.testCaseName,conf:{x:e.x?e.x:0,y:e.y?e.y:0,width:e.width?e.width:800,height:e.height?
e.width:200,threshold:0},oncomplete:e.oncomplete,scope:t});n||(n=null,e.oncomplete.call(t))},getUITestResult:function(){return this.screenCapture.getResponse()},__captureHeader:function(){this.screenCapture.capture("HomePage_Header",{x:0,y:0,width:1280,height:65,threshold:0},this.responseCallbackMethod,this)},__captureMenu:function(){this.screenCapture.capture("HomePage_Menu",{x:0,y:0,width:320,height:500,threshold:0},this.responseCallbackMethod,this)},responseCallbackMethod:function(){var e=this.screenCapture
.getResponse(this.responseCallbackMethod,this)}}});
//*******************
//LOGICAL-PATH:aria/jsunit/WidgetTestCase.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.WidgetTestCase",$extends:"aria.jsunit.TestCase",$dependencies:["aria.jsunit.helpers.OutObj"],$constructor:function(){this.$TestCase.constructor.call(this),this.outObj=aria.jsunit.helpers.OutObj},$destructor:function(){this.outObj.clearAll(),this.outObj=null,this.$TestCase.$destructor.call(this)}});
//*******************
//LOGICAL-PATH:aria/jsunit/helpers/OutObj.js
//*******************
Aria.classDefinition({$classpath:"aria.jsunit.helpers.OutObj",$dependencies:["aria.utils.Dom"],$singleton:!0,$constructor:function(){this.testArea=aria.utils.Dom.getElementById("TESTAREA"),this.store=""},$destructor:function(){this.testArea=null,this.store=null},$prototype:{tplCtxt:{$getId:function(e){return["testOutput",e].join("_")},evalCallback:function(){return aria.jsunit.helpers.OutObj.$callback.apply(this,arguments)}},write:function(e){this.store+=e},putInDOM:function(){this.testArea.innerHTML=this.store
},clearAll:function(){this.testArea.innerHTML="",this.store=""},callMacro:function(e){},beginSection:function(){},endSection:function(){}}});